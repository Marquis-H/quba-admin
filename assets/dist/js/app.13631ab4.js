(function(t){function e(e){for(var a,s,o=e[0],l=e[1],c=e[2],u=0,f=[];u<o.length;u++)s=o[u],Object.prototype.hasOwnProperty.call(i,s)&&i[s]&&f.push(i[s][0]),i[s]=0;for(a in l)Object.prototype.hasOwnProperty.call(l,a)&&(t[a]=l[a]);d&&d(e);while(f.length)f.shift()();return r.push.apply(r,c||[]),n()}function n(){for(var t,e=0;e<r.length;e++){for(var n=r[e],a=!0,s=1;s<n.length;s++){var l=n[s];0!==i[l]&&(a=!1)}a&&(r.splice(e--,1),t=o(o.s=n[0]))}return t}var a={},i={app:0},r=[];function s(t){return o.p+"js/"+({}[t]||t)+"."+{"chunk-42aa9ed6":"fedcb6bb"}[t]+".js"}function o(e){if(a[e])return a[e].exports;var n=a[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.e=function(t){var e=[],n=i[t];if(0!==n)if(n)e.push(n[2]);else{var a=new Promise((function(e,a){n=i[t]=[e,a]}));e.push(n[2]=a);var r,l=document.createElement("script");l.charset="utf-8",l.timeout=120,o.nc&&l.setAttribute("nonce",o.nc),l.src=s(t);var c=new Error;r=function(e){l.onerror=l.onload=null,clearTimeout(u);var n=i[t];if(0!==n){if(n){var a=e&&("load"===e.type?"missing":e.type),r=e&&e.target&&e.target.src;c.message="Loading chunk "+t+" failed.\n("+a+": "+r+")",c.name="ChunkLoadError",c.type=a,c.request=r,n[1](c)}i[t]=void 0}};var u=setTimeout((function(){r({type:"timeout",target:l})}),12e4);l.onerror=l.onload=r,document.head.appendChild(l)}return Promise.all(e)},o.m=t,o.c=a,o.d=function(t,e,n){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)o.d(n,a,function(e){return t[e]}.bind(null,a));return n},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/",o.oe=function(t){throw console.error(t),t};var l=window["webpackJsonp"]=window["webpackJsonp"]||[],c=l.push.bind(l);l.push=e,l=l.slice();for(var u=0;u<l.length;u++)e(l[u]);var d=c;r.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"0040":function(t,e,n){"use strict";var a=n("4ea4");Object.defineProperty(e,"__esModule",{value:!0}),e.getWorksList=r,e.createWorks=s,e.updateWorks=o,e.deleteWorks=l,e.changeToReview=c;var i=a(n("b775"));function r(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,i.default)({url:"/works/list",method:"get",params:t})}function s(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,i.default)({url:"/works/create",method:"post",data:t})}function o(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,i.default)({url:"/works/".concat(t,"/update"),method:"post",data:e})}function l(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,i.default)({url:"/works/".concat(t,"/delete"),method:"post",data:e})}function c(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,i.default)({url:"/works/change_review",method:"post",data:t})}},"0097":function(t,e,n){"use strict";var a=n("f293"),i=n.n(a);i.a},"00f4":function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("label",{staticClass:"switcher"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.inputVal,expression:"inputVal"}],staticClass:"switcher-input",attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.inputVal)?t._i(t.inputVal,null)>-1:t.inputVal},on:{change:function(e){var n=t.inputVal,a=e.target,i=!!a.checked;if(Array.isArray(n)){var r=null,s=t._i(n,r);a.checked?s<0&&(t.inputVal=n.concat([r])):s>-1&&(t.inputVal=n.slice(0,s).concat(n.slice(s+1)))}else t.inputVal=i}}}),t._v(" "),t._m(0)])},i=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("span",{staticClass:"switcher-indicator"},[n("span",{staticClass:"switcher-yes"}),t._v(" "),n("span",{staticClass:"switcher-no"})])}],r={name:"switcher",props:{value:Boolean},computed:{inputVal:{get:function(){return this.value},set:function(t){this.$emit("onchage",t)}}}},s=r,o=n("2877"),l=Object(o["a"])(s,a,i,!1,null,null,null);e["default"]=l.exports},"01be":function(t,e,n){"use strict";var a=n("4ea4");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,n("7f7f"),n("c5f6");var i=a(n("b7e9")),r=a(n("c2ac")),s=a(n("00f4")),o=a(n("c164")),l={name:"form-item",components:{CheckGroup:i.default,Input:r.default,Switcher:s.default,Textarea:o.default},props:{name:String,value:[Number,String,Boolean,Array],item:Object,v:Object},methods:{onChage:function(t){this.$emit("onchage",{name:this.name,val:t})}}};e.default=l},"034e":function(t,e,n){"use strict";var a=n("2300"),i=n.n(a);i.a},"0728":function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("h4",{staticClass:"font-weight-bold py-2 mb-2"},[t._v("作品管理")]),t._v(" "),n("list-filter",{attrs:{filters:t.listQuery.filters,filterOptions:t.filterOptions},on:{action:t.handleFilter}}),t._v(" "),n("div",{staticClass:"row"},[n("b-btn",{staticClass:"d-block mr-2 ml-3 mb-3",attrs:{variant:"primary rounded-pill"},on:{click:t.showUserCreateModal}},[n("span",{staticClass:"ion ion-md-add"}),t._v("  新增\n    ")]),t._v(" "),n("b-btn",{staticClass:"d-block ml-2 mb-3",attrs:{variant:"info rounded-pill"},on:{click:t.handleChangeToReview}},[t._v("当前评选进行评审")])],1),t._v(" "),n("b-card",{attrs:{"no-body":""}},[n("b-card-body",[n("div",{staticClass:"row"},[n("div",{staticClass:"col"},[n("span",{staticStyle:{"font-size":"18px"}},[t._v("当前评选："+t._s(t.currentEvent))])]),t._v(" "),n("div",{staticClass:"col"},[n("b-input",{staticClass:"d-inline-block w-auto float-sm-right",attrs:{size:"sm",placeholder:"搜寻..."},on:{input:function(e){return t.filter(e)}}})],1)])]),t._v(" "),n("div",{staticClass:"table-responsive"},[n("ListTable",{attrs:{options:t.options,fields:t.fields,data:t.usersData,currentPage:t.listQuery.currentPage,perPage:t.listQuery.perPage},on:{edit:t.showUserEditModal,del:t.handleDel}})],1),t._v(" "),n("b-card-body",{staticClass:"pt-0 pb-3"},[n("div",{staticClass:"row"},[n("div",{staticClass:"col-sm text-sm-left text-center pt-3"},[t.totalItems?n("span",{staticClass:"text-muted"},[t._v("Page "+t._s(t.listQuery.currentPage)+" of "+t._s(t.totalPages))]):t._e()]),t._v(" "),n("div",{staticClass:"col-sm pt-3"},[t.totalItems?n("b-pagination",{staticClass:"justify-content-center justify-content-sm-end m-0",attrs:{"total-rows":t.totalItems,"per-page":t.listQuery.perPage,size:"sm"},model:{value:t.listQuery.currentPage,callback:function(e){t.$set(t.listQuery,"currentPage",e)},expression:"listQuery.currentPage"}}):t._e()],1)])])],1),t._v(" "),n("form-modal",{ref:"addEvent",attrs:{handleType:t.handleType,options:t.options,userForm:t.userForm},on:{"update:userForm":function(e){t.userForm=e},"update:user-form":function(e){t.userForm=e},save:t.handleOperationUser}})],1)},i=[];n.d(e,"a",(function(){return a})),n.d(e,"b",(function(){return i}))},"076f":function(t,e,n){"use strict";n.r(e);var a=n("76ca"),i=n.n(a);for(var r in a)"default"!==r&&function(t){n.d(e,t,(function(){return a[t]}))}(r);e["default"]=i.a},"0905":function(t,e,n){"use strict";n.r(e),n.d(e,"getEventItems",(function(){return i})),n.d(e,"getEventList",(function(){return r})),n.d(e,"createEvent",(function(){return s})),n.d(e,"updateEvent",(function(){return o})),n.d(e,"closeEvent",(function(){return l}));var a=n("b775");function i(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(a["default"])({url:"/event/items",method:"get",params:t})}function r(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(a["default"])({url:"/event/list",method:"get",params:t})}function s(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(a["default"])({url:"/event/create",method:"post",data:t})}function o(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(a["default"])({url:"/event/".concat(t,"/update"),method:"post",data:e})}function l(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(a["default"])({url:"/event/".concat(t,"/close"),method:"post",data:e})}},"0cbb":function(t,e,n){},"0e3f":function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b-table",{staticClass:"card-table",attrs:{items:t.data,fields:t.fields,"sort-by":t.sortBy,"sort-desc":t.sortDesc,striped:!0,bordered:!0,"current-page":t.currentPage,"per-page":t.perPage,responsive:""},on:{"update:sortBy":function(e){t.sortBy=e},"update:sort-by":function(e){t.sortBy=e},"update:sortDesc":function(e){t.sortDesc=e},"update:sort-desc":function(e){t.sortDesc=e}},scopedSlots:t._u([{key:"worksType",fn:function(e){return[n("span",[t._v(t._s(t._f("getText")(e.item.worksType,"worksType",t.options)))])]}},{key:"status",fn:function(e){return[n("span",[t._v(t._s(t._f("getText")(e.item.status,"status",t.options)))])]}},{key:"event",fn:function(e){return[n("span",[t._v(t._s(t._f("getText")(e.item.event,"event",t.options)))])]}},{key:"tabs",fn:function(e){return[n("span",[t._v(t._s(t._f("getText")(e.item.tabs,"tabs",t.options)))])]}},{key:"actions",fn:function(e){return[n("b-btn",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{variant:"default btn-xs icon-btn md-btn-flat",title:"編輯"},on:{click:function(n){return t.showUserEditModal(e.item)}}},[n("i",{staticClass:"ion ion-md-create"})]),t._v(" "),n("b-dropdown",{attrs:{variant:"default btn-xs icon-btn md-btn-flat hide-arrow",right:!t.isRTL}},[n("template",{slot:"button-content"},[n("i",{staticClass:"ion ion-ios-settings"})]),t._v(" "),n("b-dropdown-item",{attrs:{href:"javascript:void(0)"},on:{click:function(n){return t.del(e.item)}}},[t._v("刪除")])],2)]}}])})},i=[];n.d(e,"a",(function(){return a})),n.d(e,"b",(function(){return i}))},"0f9a":function(t,e,n){"use strict";n.r(e);n("7f7f");var a=n("bd86"),i=n("b775");function r(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(i["default"])({url:"/auth/login_check",method:"post",data:t})}function s(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(i["default"])({url:"/auth/logout",method:"post",params:t})}var o,l=n("c24f"),c=n("5f87"),u=n("a18c");n.d(e,"types",(function(){return d}));var d={SET_TOKEN:"set_token",SET_NAME:"set_name",SET_ROLES:"set_roles",SET_SETTING:"set_setting"},f={token:Object(c["a"])(),name:"Marquis",roles:[],setting:{}},v=(o={},Object(a["a"])(o,d.SET_TOKEN,(function(t,e){t.token=e})),Object(a["a"])(o,d.SET_NAME,(function(t,e){t.name=e})),Object(a["a"])(o,d.SET_ROLES,(function(t,e){t.roles=e})),Object(a["a"])(o,d.SET_SETTING,(function(t,e){t.setting=e})),o),p={login:function(t,e){var n=t.commit,a=e.username,i=e.password;return new Promise((function(t,e){r({username:a.trim(),password:i}).then((function(e){var a=e.token;n(d.SET_TOKEN,a),Object(c["c"])(a),t()})).catch((function(t){e(t)}))}))},getInfo:function(t){var e=t.commit;return new Promise((function(t,n){Object(l["e"])().then((function(n){var a=n.data,i=a.roles,r=a.name,s=a.setting;e(d.SET_NAME,r),e(d.SET_ROLES,i),e(d.SET_SETTING,s),t(a)})).catch((function(t){n(t)}))}))},logout:function(t){var e=t.commit,n=t.state;return new Promise((function(t,a){s(n.token).then((function(){e(d.SET_TOKEN,""),e(d.SET_ROLES,[]),Object(c["b"])(),Object(u["resetRouter"])(),t()})).catch((function(t){a(t)}))}))},resetToken:function(t){var e=t.commit;return new Promise((function(t){e(d.SET_TOKEN,""),e(d.SET_ROLES,[]),Object(c["b"])(),t()}))}};e["default"]={namespaced:!0,state:f,mutations:v,actions:p}},"11b9":function(t,e,n){"use strict";var a=n("4ea4");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,n("8e6e"),n("ac6a");var i=a(n("c47a")),r=a(n("c53c")),s=a(n("7da9")),o=n("37be"),l=n("625e"),c=n("880c");function u(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function d(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?u(n,!0).forEach((function(e){(0,i.default)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):u(n).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var f={name:"WeappUser",components:{ListFilter:r.default,ListTable:s.default},computed:{totalItems:function(){return this.listQuery.total},totalPages:function(){return Math.ceil(this.totalItems/this.listQuery.perPage)}},watch:{"listQuery.currentPage":function(t){this.getList()}},data:function(){return{searchKeys:(0,l.searchKeys)(),handleType:"create",usersData:[],listQuery:(0,l.listQuery)(),filterOptions:(0,c.filterOptions)(),fields:(0,l.fields)(),originalUsersData:[],options:{}}},created:function(){this.getList()},methods:{getList:function(){var t=this;(0,o.getWeappUserList)(this.listQuery).then((function(e){t.usersData=e.data.items;var n={currentPage:e.data.currentPage,perPage:e.data.perPage,total:e.data.total};t.listQuery=d({},t.listQuery,{},n),t.originalUsersData=e.data.items.slice(0)})).catch((function(t){console.log(t)}))},handleFilter:function(){this.getList()},filter:function(t){var e=this,n=t.toLowerCase(),a=this.originalUsersData.filter((function(t){return-1!==Object.keys(t).filter((function(t){return e.searchKeys.includes(t)})).map((function(e){return String(t[e])})).join("|").toLowerCase().indexOf(n)||!n}));this.usersData=a}}};e.default=f},1287:function(t,e,n){},"168a":function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b-form",{on:{submit:function(e){return e.stopPropagation(),e.preventDefault(),t.onSubmit(e)}}},t._l(t.formItem,(function(e,a){return n("form-item",{key:a,attrs:{name:a,item:e,value:t.formData[a],v:t.$v},on:{onchage:t.onChage}})})),1)},i=[];n.d(e,"a",(function(){return a})),n.d(e,"b",(function(){return i}))},"1e05":function(t,e,n){"use strict";n.r(e);var a=n("8cf9"),i=n.n(a);for(var r in a)"default"!==r&&function(t){n.d(e,t,(function(){return a[t]}))}(r);e["default"]=i.a},2300:function(t,e,n){},"25f3":function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b-table",{staticClass:"card-table",attrs:{items:t.data,fields:t.fields,"sort-by":t.sortBy,"sort-desc":t.sortDesc,striped:!0,bordered:!0,"current-page":t.currentPage,"per-page":t.perPage,responsive:""},on:{"update:sortBy":function(e){t.sortBy=e},"update:sort-by":function(e){t.sortBy=e},"update:sortDesc":function(e){t.sortDesc=e},"update:sort-desc":function(e){t.sortDesc=e}},scopedSlots:t._u([{key:"enabled",fn:function(e){return[!0===e.item.enabled?n("b-badge",{attrs:{variant:"outline-success"}},[t._v("启用")]):t._e(),t._v(" "),!1===e.item.enabled?n("b-badge",{attrs:{variant:"outline-danger"}},[t._v("禁用")]):t._e()]}},{key:"email",fn:function(e){return[e.item.email?n("span",[t._v(t._s(e.item.email))]):n("span",[t._v("-")])]}},{key:"lastLogin",fn:function(e){return[e.item.lastLogin?n("span",[t._v(t._s(e.item.lastLogin))]):n("span",[t._v("-")])]}},{key:"actions",fn:function(e){return[n("b-btn",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{variant:"default btn-xs icon-btn md-btn-flat",title:"編輯"},on:{click:function(n){return t.showUserEditModal(e.item)}}},[n("i",{staticClass:"ion ion-md-create"})]),t._v(" "),n("b-dropdown",{attrs:{variant:"default btn-xs icon-btn md-btn-flat hide-arrow",right:!t.isRTL}},[n("template",{slot:"button-content"},[n("i",{staticClass:"ion ion-ios-settings"})]),t._v(" "),n("b-dropdown-item",{attrs:{href:"javascript:void(0)"},on:{click:function(n){return t.del(e.item)}}},[t._v("刪除")])],2)]}}])})},i=[];n.d(e,"a",(function(){return a})),n.d(e,"b",(function(){return i}))},2673:function(t,e,n){"use strict";n.r(e);var a=n("5910"),i=n.n(a);for(var r in a)"default"!==r&&function(t){n.d(e,t,(function(){return a[t]}))}(r);e["default"]=i.a},"30d1":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.invalid=e.validator=void 0;var a=n("b5ae"),i=function(){return{formData:{actualTickets:{required:a.required},fraction:{required:a.required},actualFraction:{required:a.required}}}};e.validator=i;var r=function(){return{invalidActualTickets:function(t){if(!t.v.formData.actualTickets.required)return t.$t("TITLE_REQUIRED")},invalidFraction:function(t){if(!t.v.formData.fraction.required)return t.$t("TITLE_REQUIRED")},invalidActualFraction:function(t){if(!t.v.formData.actualFraction.required)return t.$t("TITLE_REQUIRED")}}};e.invalid=r},"30e4":function(t,e,n){"use strict";n.r(e);var a=n("e4c3"),i=n.n(a);for(var r in a)"default"!==r&&function(t){n.d(e,t,(function(){return a[t]}))}(r);e["default"]=i.a},"31c2":function(t,e,n){"use strict";n.r(e),n.d(e,"types",(function(){return o})),n.d(e,"filterAsyncRoutes",(function(){return c}));n("8e6e");var a=n("bd86"),i=(n("ac6a"),n("a18c"));function r(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function s(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?r(n,!0).forEach((function(e){Object(a["a"])(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):r(n).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var o={SET_ROUTERS:"set_routers"};function l(t,e){return!e.meta||!e.meta.roles||t.some((function(t){return e.meta.roles.indexOf(t)>=0}))}function c(t,e){var n=[];return t.forEach((function(t){var a=s({},t);l(e,a)&&(a.children&&(a.children=c(a.children,e)),n.push(a))})),n}var u={routes:[],addRoutes:[]},d=Object(a["a"])({},o.SET_ROUTERS,(function(t,e){t.addRoutes=e,t.routes=i["constantRoutes"].concat(e)})),f={generateRoutes:function(t,e){var n=t.commit;return new Promise((function(t){var a;a=e.includes("ROLE_ADMIN")?i["asyncRoutes"]||[]:c(i["asyncRoutes"],e),n(o.SET_ROUTERS,a),t(a)}))}};e["default"]={namespaced:!0,state:u,mutations:d,actions:f}},"321f":function(t,e,n){"use strict";var a=n("e318"),i=n.n(a);i.a},3572:function(t,e,n){},"37be":function(t,e,n){"use strict";n.r(e),n.d(e,"getWeappUserList",(function(){return i}));var a=n("b775");function i(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(a["default"])({url:"/weapp_user/list",method:"get",params:t})}},"37c7":function(t,e,n){"use strict";n.r(e);var a=n("9be1"),i=n("1e05");for(var r in i)"default"!==r&&function(t){n.d(e,t,(function(){return i[t]}))}(r);var s=n("2877"),o=Object(s["a"])(i["default"],a["a"],a["b"],!1,null,null,null);e["default"]=o.exports},"3bc0":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,n("c5f6");var a={name:"user-table",data:function(){return{sortBy:"id",sortDesc:!1}},props:{fields:{type:Array},data:{type:Array},currentPage:{type:Number},perPage:{type:Number}},methods:{showUserEditModal:function(t){this.$emit("edit",t)},del:function(t){var e=this;this.$swal({title:"是否删除",type:"warning",showCancelButton:!0,confirmButtonText:this.$t("TITLE_CONFIRM"),cancelButtonText:this.$t("TITLE_CANCEL"),confirmButtonColor:"#1cbb84",allowOutsideClick:!1}).then((function(n){n.value&&e.$emit("del",t)}))}}};e.default=a},"42cd":function(t,e,n){"use strict";var a=n("db78"),i=n.n(a);i.a},4360:function(t,e,n){"use strict";n.r(e);n("a481"),n("ac6a");var a=n("2b0e"),i=n("2f62"),r=(n("7f7f"),{token:function(t){return t.user.token},name:function(t){return t.user.name},roles:function(t){return t.user.roles},permission_routes:function(t){return t.permission.routes},setting:function(t){return t.user.setting}}),s=r;a["default"].use(i["a"]);var o=n("c653"),l=o.keys().reduce((function(t,e){var n=e.replace(/^\.\/(.*)\.\w+$/,"$1"),a=o(e);return t[n]=a.default,t}),{}),c=new i["a"].Store({modules:l,getters:s});e["default"]=c},"45c8":function(t,e,n){"use strict";n.r(e);var a=n("168a"),i=n("521d");for(var r in i)"default"!==r&&function(t){n.d(e,t,(function(){return i[t]}))}(r);var s=n("2877"),o=Object(s["a"])(i["default"],a["a"],a["b"],!1,null,null,null);e["default"]=o.exports},4647:function(t,e,n){},4678:function(t,e,n){var a={"./af":"2bfb","./af.js":"2bfb","./ar":"8e73","./ar-dz":"a356","./ar-dz.js":"a356","./ar-kw":"423e","./ar-kw.js":"423e","./ar-ly":"1cfd","./ar-ly.js":"1cfd","./ar-ma":"0a84","./ar-ma.js":"0a84","./ar-sa":"8230","./ar-sa.js":"8230","./ar-tn":"6d83","./ar-tn.js":"6d83","./ar.js":"8e73","./az":"485c","./az.js":"485c","./be":"1fc1","./be.js":"1fc1","./bg":"84aa","./bg.js":"84aa","./bm":"a7fa","./bm.js":"a7fa","./bn":"9043","./bn.js":"9043","./bo":"d26a","./bo.js":"d26a","./br":"6887","./br.js":"6887","./bs":"2554","./bs.js":"2554","./ca":"d716","./ca.js":"d716","./cs":"3c0d","./cs.js":"3c0d","./cv":"03ec","./cv.js":"03ec","./cy":"9797","./cy.js":"9797","./da":"0f14","./da.js":"0f14","./de":"b469","./de-at":"b3eb","./de-at.js":"b3eb","./de-ch":"bb71","./de-ch.js":"bb71","./de.js":"b469","./dv":"598a","./dv.js":"598a","./el":"8d47","./el.js":"8d47","./en-SG":"cdab","./en-SG.js":"cdab","./en-au":"0e6b","./en-au.js":"0e6b","./en-ca":"3886","./en-ca.js":"3886","./en-gb":"39a6","./en-gb.js":"39a6","./en-ie":"e1d3","./en-ie.js":"e1d3","./en-il":"7333","./en-il.js":"7333","./en-nz":"6f50","./en-nz.js":"6f50","./eo":"65db","./eo.js":"65db","./es":"898b","./es-do":"0a3c","./es-do.js":"0a3c","./es-us":"55c9","./es-us.js":"55c9","./es.js":"898b","./et":"ec18","./et.js":"ec18","./eu":"0ff2","./eu.js":"0ff2","./fa":"8df4","./fa.js":"8df4","./fi":"81e9","./fi.js":"81e9","./fo":"0721","./fo.js":"0721","./fr":"9f26","./fr-ca":"d9f8","./fr-ca.js":"d9f8","./fr-ch":"0e49","./fr-ch.js":"0e49","./fr.js":"9f26","./fy":"7118","./fy.js":"7118","./ga":"5120","./ga.js":"5120","./gd":"f6b4","./gd.js":"f6b4","./gl":"8840","./gl.js":"8840","./gom-latn":"0caa","./gom-latn.js":"0caa","./gu":"e0c5","./gu.js":"e0c5","./he":"c7aa","./he.js":"c7aa","./hi":"dc4d","./hi.js":"dc4d","./hr":"4ba9","./hr.js":"4ba9","./hu":"5b14","./hu.js":"5b14","./hy-am":"d6b6","./hy-am.js":"d6b6","./id":"5038","./id.js":"5038","./is":"0558","./is.js":"0558","./it":"6e98","./it-ch":"6f12","./it-ch.js":"6f12","./it.js":"6e98","./ja":"079e","./ja.js":"079e","./jv":"b540","./jv.js":"b540","./ka":"201b","./ka.js":"201b","./kk":"6d79","./kk.js":"6d79","./km":"e81d","./km.js":"e81d","./kn":"3e92","./kn.js":"3e92","./ko":"22f8","./ko.js":"22f8","./ku":"2421","./ku.js":"2421","./ky":"9609","./ky.js":"9609","./lb":"440c","./lb.js":"440c","./lo":"b29d","./lo.js":"b29d","./lt":"26f9","./lt.js":"26f9","./lv":"b97c","./lv.js":"b97c","./me":"293c","./me.js":"293c","./mi":"688b","./mi.js":"688b","./mk":"6909","./mk.js":"6909","./ml":"02fb","./ml.js":"02fb","./mn":"958b","./mn.js":"958b","./mr":"39bd","./mr.js":"39bd","./ms":"ebe4","./ms-my":"6403","./ms-my.js":"6403","./ms.js":"ebe4","./mt":"1b45","./mt.js":"1b45","./my":"8689","./my.js":"8689","./nb":"6ce3","./nb.js":"6ce3","./ne":"3a39","./ne.js":"3a39","./nl":"facd","./nl-be":"db29","./nl-be.js":"db29","./nl.js":"facd","./nn":"b84c","./nn.js":"b84c","./pa-in":"f3ff","./pa-in.js":"f3ff","./pl":"8d57","./pl.js":"8d57","./pt":"f260","./pt-br":"d2d4","./pt-br.js":"d2d4","./pt.js":"f260","./ro":"972c","./ro.js":"972c","./ru":"957c","./ru.js":"957c","./sd":"6784","./sd.js":"6784","./se":"ffff","./se.js":"ffff","./si":"eda5","./si.js":"eda5","./sk":"7be6","./sk.js":"7be6","./sl":"8155","./sl.js":"8155","./sq":"c8f3","./sq.js":"c8f3","./sr":"cf1e","./sr-cyrl":"13e9","./sr-cyrl.js":"13e9","./sr.js":"cf1e","./ss":"52bd","./ss.js":"52bd","./sv":"5fbd","./sv.js":"5fbd","./sw":"74dc","./sw.js":"74dc","./ta":"3de5","./ta.js":"3de5","./te":"5cbb","./te.js":"5cbb","./tet":"576c","./tet.js":"576c","./tg":"3b1b","./tg.js":"3b1b","./th":"10e8","./th.js":"10e8","./tl-ph":"0f38","./tl-ph.js":"0f38","./tlh":"cf75","./tlh.js":"cf75","./tr":"0e81","./tr.js":"0e81","./tzl":"cf51","./tzl.js":"cf51","./tzm":"c109","./tzm-latn":"b53d","./tzm-latn.js":"b53d","./tzm.js":"c109","./ug-cn":"6117","./ug-cn.js":"6117","./uk":"ada2","./uk.js":"ada2","./ur":"5294","./ur.js":"5294","./uz":"2e8c","./uz-latn":"010e","./uz-latn.js":"010e","./uz.js":"2e8c","./vi":"2921","./vi.js":"2921","./x-pseudo":"fd7e","./x-pseudo.js":"fd7e","./yo":"7f33","./yo.js":"7f33","./zh-cn":"5c3a","./zh-cn.js":"5c3a","./zh-hk":"49ab","./zh-hk.js":"49ab","./zh-tw":"90ea","./zh-tw.js":"90ea"};function i(t){var e=r(t);return n(e)}function r(t){if(!n.o(a,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return a[t]}i.keys=function(){return Object.keys(a)},i.resolve=r,t.exports=i,i.id="4678"},"4f84":function(t,e,n){},"4fda":function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"ui-bordered px-4 pt-4 mb-4"},[n("div",{staticClass:"form-row align-items-center"},[t._l(t.filterOptions,(function(e){return n("div",{key:e.value,staticClass:"col-md-4 mb-4"},[n("label",{staticClass:"form-label"},[t._v(t._s(e.label))]),t._v(" "),n("b-input",{model:{value:t.filters[e.value],callback:function(n){t.$set(t.filters,e.value,n)},expression:"filters[item.value]"}})],1)})),t._v(" "),n("div",{staticClass:"col-md col-xl-2 mb-4"},[n("label",{staticClass:"form-label d-none d-md-block"},[t._v(" ")]),t._v(" "),n("b-btn",{attrs:{variant:"secondary",block:!0},on:{click:function(e){return t.handleSearch()}}},[t._v(t._s(t.$t("TITLE_SEARCH")))])],1)],2)])},i=[];n.d(e,"a",(function(){return a})),n.d(e,"b",(function(){return i}))},"521d":function(t,e,n){"use strict";n.r(e);var a=n("9239"),i=n.n(a);for(var r in a)"default"!==r&&function(t){n.d(e,t,(function(){return a[t]}))}(r);e["default"]=i.a},"54a5":function(t,e,n){"use strict";n.r(e);var a=n("97b0"),i=n.n(a);for(var r in a)"default"!==r&&function(t){n.d(e,t,(function(){return a[t]}))}(r);e["default"]=i.a},"54a5a":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.filterOptions=void 0;var a=function(){return[{label:"名称",value:"title",type:"input"},{label:"编号",value:"worksNo",type:"input"}]};e.filterOptions=a},"54db":function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("h4",{staticClass:"font-weight-bold py-3 mb-4"},[t._v("\n    "+t._s(t.$t("TITLE_DASHBOARD"))+"\n    "),n("div",{staticClass:"text-muted text-tiny mt-1"},[n("small",{staticClass:"font-weight-normal"},[t._v(t._s(t.now))])])]),t._v(" "),n("div",{staticClass:"row"},[n("div",{staticClass:"col-sm-6 col-xl-3"},[n("b-card",{staticClass:"mb-4"},[n("div",{staticClass:"d-flex align-items-center"},[n("div",{staticClass:"lnr lnr-earth display-4 text-info"}),t._v(" "),n("div",{staticClass:"ml-3"},[n("div",{staticClass:"text-muted small"},[t._v("小程序访问量")]),t._v(" "),n("div",{staticClass:"text-large"},[t._v(t._s(t.dashboardInfo.statistics.weappVisit))])])])])],1),t._v(" "),n("div",{staticClass:"col-sm-6 col-xl-3"},[n("b-card",{staticClass:"mb-4"},[n("div",{staticClass:"d-flex align-items-center"},[n("div",{staticClass:"lnr lnr-file-empty display-4 text-success"}),t._v(" "),n("div",{staticClass:"ml-3"},[n("div",{staticClass:"text-muted small"},[t._v("作品数")]),t._v(" "),n("div",{staticClass:"text-large"},[t._v(t._s(t.dashboardInfo.statistics.works))])])])])],1),t._v(" "),n("div",{staticClass:"col-sm-6 col-xl-3"},[n("b-card",{staticClass:"mb-4"},[n("div",{staticClass:"d-flex align-items-center"},[n("div",{staticClass:"lnr lnr-database display-4 text-danger"}),t._v(" "),n("div",{staticClass:"ml-3"},[n("div",{staticClass:"text-muted small"},[t._v("小程序用户数")]),t._v(" "),n("div",{staticClass:"text-large"},[t._v(t._s(t.dashboardInfo.statistics.weappUser))])])])])],1),t._v(" "),n("div",{staticClass:"col-sm-6 col-xl-3"},[n("b-card",{staticClass:"mb-4"},[n("div",{staticClass:"d-flex align-items-center"},[n("div",{staticClass:"lnr lnr-users display-4 text-warning"}),t._v(" "),n("div",{staticClass:"ml-3"},[n("div",{staticClass:"text-muted small"},[t._v("管理員")]),t._v(" "),n("div",{staticClass:"text-large"},[t._v(t._s(t.dashboardInfo.statistics.user))])])])])],1)]),t._v(" "),n("b-card",{staticClass:"mb-4",attrs:{"no-body":""}},[n("b-card-header",{staticClass:"with-elements border-0 pt-3 pb-0",attrs:{"header-tag":"h5"}},[n("span",{staticClass:"card-header-title"},[n("i",{staticClass:"ion ion-md-stats text-primary"}),t._v("  訪問量\n      ")]),t._v(" "),n("div",{staticClass:"card-header-elements ml-auto"},[n("b-btn-group",{attrs:{size:"sm"}},[n("b-btn",{staticClass:"md-btn-flat",class:{active:1===t.displayRange},attrs:{variant:"default"},on:{click:function(e){t.displayRange=1}}},[t._v("本日")]),t._v(" "),n("b-btn",{staticClass:"md-btn-flat",class:{active:6===t.displayRange},attrs:{variant:"default"},on:{click:function(e){t.displayRange=6}}},[t._v("一周")]),t._v(" "),n("b-btn",{staticClass:"md-btn-flat",class:{active:12===t.displayRange},attrs:{variant:"default"},on:{click:function(e){t.displayRange=12}}},[t._v("一個月")]),t._v(" "),n("b-btn",{staticClass:"md-btn-flat",class:{active:36===t.displayRange},attrs:{variant:"default"},on:{click:function(e){t.displayRange=36}}},[t._v("三個月")])],1)],1)]),t._v(" "),n("hr",{staticClass:"border-light mb-0"}),t._v(" "),n("div",{staticClass:"row no-gutters row-bordered row-border-light"},[n("div",{staticClass:"d-flex col-md-8 col-lg-12 col-xl-8 align-items-center p-4"},[n("dashboard-chart1",{staticClass:"w-100",attrs:{height:230}})],1),t._v(" "),n("div",{staticClass:"col-md-4 col-lg-12 col-xl-4 px-4 pt-4 pb-4"},[n("dashboard-chart2",{attrs:{height:230}})],1)])],1)],1)},i=[];n.d(e,"a",(function(){return a})),n.d(e,"b",(function(){return i}))},"56d7":function(t,e,n){"use strict";n.r(e);n("6c7b"),n("cadf"),n("f751"),n("456d"),n("551c"),n("2fdb"),n("8a81"),n("6762"),n("ffc1"),n("097d"),n("ac4d");var a=n("2b0e"),i=n("69d9"),r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("router-view"),t._v(" "),n("notifications",{attrs:{group:"notifications-default"}})],1)},s=[],o={name:"App",metaInfo:{title:"Index",titleTemplate:"%s - Admin"}},l=o,c=(n("321f"),n("6230"),n("dbc7"),n("e5b2"),n("9a20"),n("0097"),n("2877")),u=Object(c["a"])(l,r,s,!1,null,null,null),d=u.exports,f=n("a18c"),v=n.n(f),p=n("4360"),m=n("9f7b"),h=n.n(m),b=n("ee98"),g=n.n(b),_=n("f2a8"),y=n("f0bd"),C=n("1dce");n("2eba");a["default"].config.productionTip=!1,y["default"].Defaults.modifiers.computeStyle.gpuAcceleration=!1;var w=!0;a["default"].use(h.a),a["default"].use(g.a),a["default"].use(C["Vuelidate"]),a["default"].mixin({data:_["a"]}),new a["default"]({router:v.a,store:p["default"],i18n:i["a"],render:function(t){return t(d)},performance:!w,data:{sub:!1}}).$mount("#app")},"56fa":function(t,e,n){"use strict";n.r(e);var a=n("0728"),i=n("e9e0");for(var r in i)"default"!==r&&function(t){n.d(e,t,(function(){return i[t]}))}(r);n("8e35");var s=n("2877"),o=Object(s["a"])(i["default"],a["a"],a["b"],!1,null,null,null);e["default"]=o.exports},5910:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a={name:"user-filter",props:{filters:{type:Object,default:function(){return{username:void 0}}},filterOptions:{type:Array,default:function(){return[]}}},methods:{handleSearch:function(){this.$emit("action",this.filters)}}};e.default=a},"5aa5":function(t,e,n){"use strict";var a=n("634b"),i=n.n(a);i.a},"5e1b":function(t,e,n){"use strict";var a=n("4ea4");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,n("ac6a");var i=a(n("7663")),r=a(n("5fd5")),s=a(n("d374b")),o=n("ed08"),l=n("dea6"),c=n("0905"),u=n("0040"),d=n("c60c"),f=n("7501"),v=n("95b7"),p=n("83d6"),m={name:"Works",components:{ListFilter:i.default,ListTable:r.default,FormModal:s.default},computed:{totalItems:function(){return this.usersData.length},totalPages:function(){return Math.ceil(this.totalItems/this.listQuery.perPage)}},data:function(){return{searchKeys:(0,d.searchKeys)(),handleType:"create",usersData:[],userForm:f.formData,listQuery:(0,d.listQuery)(),filterOptions:(0,v.filterOptions)(),fields:(0,d.fields)(),originalUsersData:[],options:{events:[],tabs:[],worksType:[{value:null,text:"请选择作品类型"},{text:"文章",value:"article"},{text:"图片",value:"photo"}]},currentEvent:null}},created:function(){this.getList()},methods:{getList:function(){var t=this;(0,u.getWorksList)(this.listQuery).then((function(e){t.usersData=e.data.items,t.currentEvent=e.data.isSelectEvent,t.originalUsersData=e.data.items.slice(0)})).catch((function(t){console.log(t)})),(0,l.getTabItems)().then((function(e){t.options.tabs=e.data})),(0,c.getEventItems)().then((function(e){t.options.events=e.data}))},handleFilter:function(){this.getList()},showUserCreateModal:function(){this.userForm=f.formData,this.handleType="create",this.$refs["addEvent"].$refs["form"].$v&&this.$refs["addEvent"].$refs["form"].$v.$reset(),this.$refs["addEvent"].$refs.userModal.show()},showUserEditModal:function(t){this.handleType="edit",this.userForm=t,this.$refs["addEvent"].$refs["form"].$v&&this.$refs["addEvent"].$refs["form"].$v.$reset(),this.$refs["addEvent"].$refs.userModal.show()},filter:function(t){var e=this,n=t.toLowerCase(),a=this.originalUsersData.filter((function(t){return-1!==Object.keys(t).filter((function(t){return e.searchKeys.includes(t)})).map((function(e){return String(t[e])})).join("|").toLowerCase().indexOf(n)||!n}));this.usersData=a},handleOperationUser:function(){"create"===this.handleType?this.handleCreateData():this.handleUpdateData()},handleCreateData:function(){var t=this;(0,u.createWorks)(this.userForm).then((function(e){t.usersData.unshift(e.data),t.$refs["addEvent"].$refs.userModal.hide(),(0,o.notify)(p.successAlert,"Success","创建成功")})).catch((function(t){console.log(t)}))},handleUpdateData:function(){var t=this,e=this.userForm.id;(0,u.updateWorks)(e,this.userForm).then((function(e){t.userForm=e.data,t.getList(),t.$refs["addEvent"].$refs.userModal.hide(),(0,o.notify)(p.successAlert,"Success","更新成功")})).catch((function(t){console.log(t)}))},handleDel:function(t){var e=this;(0,u.deleteWorks)(t.id,t).then((function(t){(0,o.notify)(p.successAlert,"Success","删除成功"),e.getList()})).catch((function(t){console.log(t)}))},handleChangeToReview:function(){var t=this;this.$swal({title:"是否进行评审",type:"warning",showCancelButton:!0,confirmButtonText:this.$t("TITLE_CONFIRM"),cancelButtonText:this.$t("TITLE_CANCEL"),confirmButtonColor:"#1cbb84",allowOutsideClick:!1}).then((function(e){e.value&&(0,u.changeToReview)().then((function(e){(0,o.notify)(p.successAlert,"Success","当前评选中的 "+e.data.count+" 个作品进入评审阶段"),t.getList()}))}))}}};e.default=m},"5f87":function(t,e,n){"use strict";n.d(e,"a",(function(){return s})),n.d(e,"c",(function(){return o})),n.d(e,"b",(function(){return l}));var a=n("a78e"),i=n.n(a),r="Admin-Token";function s(){return i.a.get(r)}function o(t){return i.a.set(r,t)}function l(){return i.a.remove(r)}},"5fd4":function(t,e,n){"use strict";n.r(e),n.d(e,"getDashboardInfo",(function(){return i}));var a=n("b775");function i(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(a["default"])({url:"/dashboard/info",method:"get",params:t})}},"5fd5":function(t,e,n){"use strict";n.r(e);var a=n("0e3f"),i=n("8fcf");for(var r in i)"default"!==r&&function(t){n.d(e,t,(function(){return i[t]}))}(r);var s=n("2877"),o=Object(s["a"])(i["default"],a["a"],a["b"],!1,null,null,null);e["default"]=o.exports},"61c9":function(t,e,n){"use strict";var a=n("e0da"),i=n.n(a);i.a},6230:function(t,e,n){"use strict";var a=n("86ad"),i=n.n(a);i.a},"625e":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.fields=e.searchKeys=e.listQuery=void 0;var a=function(){return{currentPage:1,perPage:20,total:0,filters:{nickname:void 0}}};e.listQuery=a;var i=function(){return["id","nickname"]};e.searchKeys=i;var r=function(){return[{label:"ID",key:"id",sortable:!0,tdClass:"align-middle"},{label:"昵称",key:"nickname",sortable:!0,tdClass:"align-middle"},{label:"头像",key:"avatar",sortable:!0,tdClass:"align-middle"},{label:"剩余票数",key:"tickets",sortable:!0,tdClass:"align-middle"},{label:"创建时间",key:"createdAt",sortable:!0,tdClass:"align-middle"},{key:"actions",label:" ",tdClass:"text-nowrap align-middle text-center"}]};e.fields=r},"634b":function(t,e,n){},"6821d":function(t,e,n){"use strict";var a=n("4647"),i=n.n(a);i.a},"69d9":function(t,e,n){"use strict";var a=n("2b0e"),i=n("a925"),r=(n("8e6e"),n("ac6a"),n("bd86")),s={TITLE_WEBSITE:"公益活动管理",TITLE_DASHBOARD:"仪表盘",TITLE_ABOUT_US:"关于我们",TITLE_PROFILE:"个人资料",TITLE_SYSTEM_SETTING:"系统设定",TITLE_LOGOUT:"登出",TITLE_CONFIRM:"确定",TITLE_CANCEL:"取消",TITLE_REMEMBER_ME:"自动登录",TITLE_SIGN_IN:"登录",TITLE_USERNAME:"用户名",TITLE_PASSWORD:"密码",TITLE_USER_MANAGER:"管理员用户",TITLE_SEARCH:"搜寻",TITLE_REQUIRED:"此栏位必须填写",TITLE_LOGIN:"登录"};function o(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function l(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?o(n,!0).forEach((function(e){Object(r["a"])(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):o(n).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var c={zhHant:l({},s)},u=c,d=n("5886"),f=n("dcf4"),v=n.n(f),p=n("96eb"),m=n.n(p),h={upload:function(t){return{code:0,data:{url:"http://localhost:8080/img/avatars/1.png",name:"测试图片"}}}},b={system:{name:"后台管理系统",logo:void 0},normal:{isGray:!1}},g={getSetting:function(t){return{code:0,data:b}},updateSetting:function(t){var e=JSON.parse(t.body);return{code:0,data:e}}};m.a.mock(/\/api\/v1\/admin\/setting\/info/,"get",g.getSetting),m.a.mock(/\/api\/v1\/admin\/setting\/update/,"post",g.updateSetting),m.a.mock(/\/api\/v1\/admin\/upload/,"post",h.upload);m.a,n("96cf");var _=n("3b8d"),y=n("a18c"),C=n.n(y),w=n("4360"),k=n("323e"),O=n.n(k),E=(n("a5d8"),n("5f87")),j=n("ed08");O.a.configure({showSpinner:!1});var x=["/login"];C.a.beforeEach(function(){var t=Object(_["a"])(regeneratorRuntime.mark((function t(e,n,a){var i,r,s,o,l,c,u;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(O.a.start(),document.title=Object(j["getPageTitle"])(e.meta.title),i=Object(E["a"])(),!i){t.next=34;break}if("/login"!==e.path){t.next=9;break}a({path:"/"}),O.a.done(),t.next=32;break;case 9:if(r=w["default"].getters.roles&&w["default"].getters.roles.length>0,!r){t.next=14;break}a(),t.next=32;break;case 14:return t.prev=14,t.next=17,w["default"].dispatch("user/getInfo");case 17:return s=t.sent,o=s.roles,t.next=21,w["default"].dispatch("permission/generateRoutes",o);case 21:l=t.sent,C.a.addRoutes(l),a(),t.next=32;break;case 26:return t.prev=26,t.t0=t["catch"](14),t.next=30,w["default"].dispatch("user/resetToken");case 30:a("/login?redirect=".concat(e.path)),O.a.done();case 32:t.next=49;break;case 34:if(-1===x.indexOf(e.path)){t.next=47;break}if(c=w["default"].getters.roles&&w["default"].getters.roles.length>0,!c){t.next=44;break}return t.next=39,w["default"].dispatch("permission/generateRoutes",c);case 39:u=t.sent,C.a.addRoutes(u),a(),t.next=45;break;case 44:a();case 45:t.next=49;break;case 47:a("/login?redirect=".concat(e.path)),O.a.done();case 49:case"end":return t.stop()}}),t,null,[[14,26]])})));return function(e,n,a){return t.apply(this,arguments)}}()),C.a.afterEach((function(){O.a.done()})),n.d(e,"a",(function(){return $})),a["default"].use(i["a"]),a["default"].use(d["a"]),a["default"].use(v.a);var T="zhHant",$=new i["a"]({locale:T,fallbackLocale:T,messages:u,silentTranslationWarn:!0})},"706a":function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b-table",{staticClass:"card-table",attrs:{items:t.data,fields:t.fields,"sort-by":t.sortBy,"sort-desc":t.sortDesc,striped:!0,bordered:!0,"per-page":t.perPage,responsive:""},on:{"update:sortBy":function(e){t.sortBy=e},"update:sort-by":function(e){t.sortBy=e},"update:sortDesc":function(e){t.sortDesc=e},"update:sort-desc":function(e){t.sortDesc=e}},scopedSlots:t._u([{key:"avatar",fn:function(t){return[n("img",{attrs:{width:"60",src:t.item.avatar}})]}}])})},i=[];n.d(e,"a",(function(){return a})),n.d(e,"b",(function(){return i}))},"707b":function(t,e,n){"use strict";var a=n("7ef7"),i=n.n(a);i.a},"71f1":function(t,e,n){},7292:function(t,e,n){"use strict";n.r(e);var a=n("f3cb"),i=n("75af");for(var r in i)"default"!==r&&function(t){n.d(e,t,(function(){return i[t]}))}(r);var s=n("2877"),o=Object(s["a"])(i["default"],a["a"],a["b"],!1,null,null,null);e["default"]=o.exports},7424:function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("b-card",{attrs:{"no-body":""}},[n("div",{staticClass:"row no-gutters row-bordered row-border-light",staticStyle:{overflow:"initial"}},[n("div",{staticClass:"col-md-3 pt-0"},[n("b-list-group",{staticClass:"account-settings-links",attrs:{flush:""}},[n("b-list-group-item",{attrs:{button:"",active:"general"===t.curTab},on:{click:function(e){t.curTab="general"}}},[t._v("資料修改")]),t._v(" "),n("b-list-group-item",{attrs:{button:"",active:"password"===t.curTab},on:{click:function(e){t.curTab="password"}}},[t._v("修改密碼")])],1)],1),t._v(" "),"general"===t.curTab?n("div",{staticClass:"col-md-9"},[n("b-card-body",[n("profile-form",{attrs:{accountData:t.accountData},on:{submit:this.handleSaveProfile}})],1)],1):t._e(),t._v(" "),"password"===t.curTab?n("div",{staticClass:"col-md-9"},[n("b-card-body",{staticClass:"pb-2"},[n("change-password-form",{on:{submit:this.handleChangePassword}})],1)],1):t._e()])])],1)},i=[],r=n("c24f"),s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b-form",{on:{submit:function(e){return e.stopPropagation(),e.preventDefault(),t.handleSaveProfile()}}},[n("b-form-group",[n("label",{staticClass:"switcher"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.accountData.isEnable,expression:"accountData.isEnable"}],staticClass:"switcher-input",attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.accountData.isEnable)?t._i(t.accountData.isEnable,null)>-1:t.accountData.isEnable},on:{change:function(e){var n=t.accountData.isEnable,a=e.target,i=!!a.checked;if(Array.isArray(n)){var r=null,s=t._i(n,r);a.checked?s<0&&t.$set(t.accountData,"isEnable",n.concat([r])):s>-1&&t.$set(t.accountData,"isEnable",n.slice(0,s).concat(n.slice(s+1)))}else t.$set(t.accountData,"isEnable",i)}}}),t._v(" "),n("span",{staticClass:"switcher-indicator"},[n("span",{staticClass:"switcher-yes"}),t._v(" "),n("span",{staticClass:"switcher-no"})]),t._v(" "),n("span",{staticClass:"switcher-label"},[t._v("是否开启")])])]),t._v(" "),n("b-form-group",{attrs:{label:"用户名","invalid-feedback":t.invalidUsername}},[n("div",{attrs:{slot:"label"},slot:"label"},[n("i",{staticClass:"ion ion-ios-medical text-left text-danger"}),t._v(" 用户名\n    ")]),t._v(" "),n("b-input",{attrs:{state:t.$v.accountData.username.$dirty?!t.$v.accountData.username.$error:null},model:{value:t.accountData.username,callback:function(e){t.$set(t.accountData,"username",e)},expression:"accountData.username"}})],1),t._v(" "),n("b-form-group",{attrs:{label:"电邮"}},[n("b-input",{model:{value:t.accountData.email,callback:function(e){t.$set(t.accountData,"email",e)},expression:"accountData.email"}})],1),t._v(" "),n("b-form-group",{attrs:{label:"姓名","invalid-feedback":t.invalidName}},[n("div",{attrs:{slot:"label"},slot:"label"},[n("i",{staticClass:"ion ion-ios-medical text-left text-danger"}),t._v(" 姓名\n    ")]),t._v(" "),n("b-input",{attrs:{state:t.$v.accountData.name.$dirty?!t.$v.accountData.name.$error:null},model:{value:t.accountData.name,callback:function(e){t.$set(t.accountData,"name",e)},expression:"accountData.name"}})],1),t._v(" "),n("div",{staticClass:"text-right mt-3"},[n("b-btn",{attrs:{variant:"primary",type:"submit"}},[t._v("保存")])],1)],1)},o=[],l=(n("7f7f"),n("b5ae")),c={name:"profile-form",components:{},computed:{invalidUsername:function(){if(!this.$v.accountData.username.required)return"必须填写"},invalidName:function(){if(!this.$v.accountData.name.required)return"必须填写"}},data:function(){return{languageOptions:[{label:"繁體",value:"zh_TW"},{label:"简体",value:"zh_CN"},{label:"英文",value:"en"},{label:"葡文",value:"pt_PT"}]}},props:{accountData:{type:Object}},validations:{accountData:{username:{required:l["required"]},name:{required:l["required"]}}},methods:{handleSaveProfile:function(){var t=this;this.$v.accountData.$touch(),this.$v.accountData.$anyError||this.$nextTick((function(){t.$emit("submit",t.accountData)}))}}},u=c,d=(n("60bc"),n("d152"),n("2877")),f=Object(d["a"])(u,s,o,!1,null,null,null),v=f.exports,p=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b-form",{on:{submit:function(e){return e.stopPropagation(),e.preventDefault(),t.handleChangePassword()}}},[n("b-form-group",{attrs:{label:"当前密码","invalid-feedback":t.invalidOldPassword}},[n("div",{attrs:{slot:"label"},slot:"label"},[n("i",{staticClass:"ion ion-ios-medical text-left text-danger"}),t._v(" 当前密码\n    ")]),t._v(" "),n("b-input",{attrs:{type:"password",state:t.$v.password.old.$dirty?!t.$v.password.old.$error:null},model:{value:t.password.old,callback:function(e){t.$set(t.password,"old",e)},expression:"password.old"}})],1),t._v(" "),n("b-form-group",{attrs:{label:"新密码","invalid-feedback":t.invalidNewPassword}},[n("div",{attrs:{slot:"label"},slot:"label"},[n("i",{staticClass:"ion ion-ios-medical text-left text-danger"}),t._v(" 新密码\n    ")]),t._v(" "),n("b-input",{attrs:{type:"password",state:t.$v.password.password.$dirty?!t.$v.password.password.$error:null},model:{value:t.password.password,callback:function(e){t.$set(t.password,"password",e)},expression:"password.password"}})],1),t._v(" "),n("b-form-group",{attrs:{label:"确认新密码","invalid-feedback":t.invalidRepeatPassword}},[n("b-input",{attrs:{type:"password",state:t.$v.password.repeatPassword.$dirty?!t.$v.password.repeatPassword.$error:null},model:{value:t.password.repeatPassword,callback:function(e){t.$set(t.password,"repeatPassword",e)},expression:"password.repeatPassword"}})],1),t._v(" "),n("div",{staticClass:"text-right mt-3"},[n("b-btn",{attrs:{variant:"primary",type:"submit"}},[t._v("保存")])],1)],1)},m=[],h={name:"change-password-form",data:function(){return{password:{}}},computed:{invalidOldPassword:function(){if(!this.$v.password.old.required)return"必须填写"},invalidNewPassword:function(){return this.$v.password.password.required?this.$v.password.password.minLength?void 0:"密码至少大于8位":"必须填写"},invalidRepeatPassword:function(){if(!this.$v.password.repeatPassword.sameAsPassword)return"密码必须相同"}},validations:{password:{old:{required:l["required"]},password:{required:l["required"],minLength:Object(l["minLength"])(8)},repeatPassword:{sameAsPassword:Object(l["sameAs"])("password")}}},methods:{handleChangePassword:function(){var t=this;this.$v.password.$touch(),this.$v.password.$anyError||this.$nextTick((function(){t.$emit("submit",t.password)}))}}},b=h,g=Object(d["a"])(b,p,m,!1,null,null,null),_=g.exports,y=n("ed08"),C=n("83d6"),w={data:function(){return{curTab:"general",accountData:{}}},components:{ProfileForm:v,ChangePasswordForm:_},created:function(){this.getProfile()},methods:{getProfile:function(){var t=this;Object(r["c"])().then((function(e){t.accountData=e.data})).catch((function(t){console.log(t)}))},handleChangePassword:function(t){Object(r["g"])(t).then((function(t){Object(y["notify"])(C.successAlert,"Success","更新成功")})).catch((function(t){console.log(t)}))},handleSaveProfile:function(t){Object(r["h"])(t).then((function(t){Object(y["notify"])(C.successAlert,"Success","更新成功")})).catch((function(t){console.log(t)}))}}},k=w,O=Object(d["a"])(k,a,i,!1,null,null,null);e["default"]=O.exports},7501:function(t,e,n){"use strict";var a=n("4ea4");Object.defineProperty(e,"__esModule",{value:!0}),e.formItem=e.formData=void 0;var i=n("8fa4"),r=a(n("4360")),s={title:null,author:null,organization:null,description:null,worksType:null,content:null,photos:[],tabs:[],remark:null,event:null};e.formData=s;var o=function(t){var e=JSON.parse(JSON.stringify(t));return{event:{label:"投票项",placeholder:"请选择投票项",invalid:(0,i.invalid)().invalidEvent,options:e["events"],component:"Select",state:!0,required:!0},title:{label:"名称",placeholder:"请填写名称",state:!0,invalid:(0,i.invalid)().invalidTitle,component:"Input",required:!0},author:{label:"作者",placeholder:"请填写作者",state:!1,component:"Input",required:!1},organization:{label:"学校（单位）",placeholder:"请填写学校（单位）",state:!1,component:"Input",required:!1},worksType:{label:"作品类型",placeholder:"请选择作品类型",invalid:(0,i.invalid)().invalidWorksType,state:!0,options:e["worksType"],component:"Select",required:!0},description:{label:"说明",placeholder:"请填写说明",component:"Textarea",state:!1},content:{label:"内容",placeholder:"请填写内容",state:!1,component:"Editor",required:!1},photos:{label:"图集",state:!1,component:"UploadImages",action:r.default.getters.setting.domain+"/api/v1/admin/upload/image",required:!1},tabs:{label:"标签",placeholder:"请选择标签",options:e["tabs"],component:"MultiSelect",required:!1},remark:{label:"备注",placeholder:"请填写备注",component:"Textarea",state:!1}}};e.formItem=o},"75af":function(t,e,n){"use strict";n.r(e);var a=n("da08"),i=n.n(a);for(var r in a)"default"!==r&&function(t){n.d(e,t,(function(){return a[t]}))}(r);e["default"]=i.a},7663:function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"ui-bordered px-4 pt-4 mb-4"},[n("div",{staticClass:"form-row align-items-center"},[t._l(t.filterOptions,(function(e){return n("div",{key:e.value,staticClass:"col-md-4 mb-4"},[n("label",{staticClass:"form-label"},[t._v(t._s(e.label))]),t._v(" "),"input"==e.type?n("b-input",{model:{value:t.filters[e.value],callback:function(n){t.$set(t.filters,e.value,n)},expression:"filters[item.value]"}}):t._e(),t._v(" "),"select"==e.type?n("b-select",{attrs:{options:e.options},model:{value:t.filters[e.value],callback:function(n){t.$set(t.filters,e.value,n)},expression:"filters[item.value]"}}):t._e()],1)})),t._v(" "),n("div",{staticClass:"col-md col-xl-2 mb-4"},[n("label",{staticClass:"form-label d-none d-md-block"},[t._v(" ")]),t._v(" "),n("b-btn",{attrs:{variant:"secondary",block:!0},on:{click:function(e){return t.handleSearch()}}},[t._v(t._s(t.$t("TITLE_SEARCH")))])],1)],2)])},i=[],r={name:"user-filter",props:{filters:{type:Object,default:function(){return{username:void 0}}},filterOptions:{type:Array,default:function(){return[]}}},methods:{handleSearch:function(){this.$emit("action",this.filters)}}},s=r,o=n("2877"),l=Object(o["a"])(s,a,i,!1,null,null,null);e["default"]=l.exports},"76ca":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,n("c5f6");var a={name:"user-table",data:function(){return{sortBy:"id",sortDesc:!1}},props:{fields:{type:Array},data:{type:Array},currentPage:{type:Number},perPage:{type:Number}},methods:{showUserEditModal:function(t){this.$emit("edit",t)},del:function(t){var e=this;this.$swal({title:"是否删除",type:"warning",showCancelButton:!0,confirmButtonText:this.$t("TITLE_CONFIRM"),cancelButtonText:this.$t("TITLE_CANCEL"),confirmButtonColor:"#1cbb84",allowOutsideClick:!1}).then((function(n){n.value&&e.$emit("del",t)}))}}};e.default=a},"7da9":function(t,e,n){"use strict";n.r(e);var a=n("706a"),i=n("076f");for(var r in i)"default"!==r&&function(t){n.d(e,t,(function(){return i[t]}))}(r);var s=n("2877"),o=Object(s["a"])(i["default"],a["a"],a["b"],!1,null,null,null);e["default"]=o.exports},"7eae":function(t,e,n){"use strict";var a=n("f390"),i=n.n(a);i.a},"7ef7":function(t,e,n){},"80b1":function(t,e,n){},"83d6":function(t,e){t.exports={title:"珠江口白海豚保护公益活动管理系统",successAlert:"bg-success text-white",errorAlert:"bg-danger text-white",warningAlert:"bg-warning text-dark"}},8674:function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("h4",{staticClass:"font-weight-bold py-2 mb-2"},[t._v("小程序用户管理")]),t._v(" "),n("list-filter",{attrs:{filters:t.listQuery.filters,filterOptions:t.filterOptions},on:{action:t.handleFilter}}),t._v(" "),n("b-card",{attrs:{"no-body":""}},[n("b-card-body",[n("div",{staticClass:"row"},[n("div",{staticClass:"col"},[n("b-input",{staticClass:"d-inline-block w-auto float-sm-right",attrs:{size:"sm",placeholder:"搜寻..."},on:{input:function(e){return t.filter(e)}}})],1)])]),t._v(" "),n("div",{staticClass:"table-responsive"},[n("ListTable",{attrs:{fields:t.fields,data:t.usersData,currentPage:t.listQuery.currentPage,perPage:t.listQuery.perPage}})],1),t._v(" "),n("b-card-body",{staticClass:"pt-0 pb-3"},[n("div",{staticClass:"row"},[n("div",{staticClass:"col-sm text-sm-left text-center pt-3"},[t.totalItems?n("span",{staticClass:"text-muted"},[t._v("Page "+t._s(t.listQuery.currentPage)+" of "+t._s(t.totalPages))]):t._e()]),t._v(" "),n("div",{staticClass:"col-sm pt-3"},[t.totalItems?n("b-pagination",{staticClass:"justify-content-center justify-content-sm-end m-0",attrs:{"total-rows":t.totalItems,"per-page":t.listQuery.perPage,size:"sm"},model:{value:t.listQuery.currentPage,callback:function(e){t.$set(t.listQuery,"currentPage",e)},expression:"listQuery.currentPage"}}):t._e()],1)])])],1)],1)},i=[];n.d(e,"a",(function(){return a})),n.d(e,"b",(function(){return i}))},"86ad":function(t,e,n){},"880c":function(t,e,n){"use strict";n.r(e),n.d(e,"filterOptions",(function(){return a}));var a=function(){return[{label:"昵称",value:"nickname",type:"input"}]}},"8cf9":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,n("c5f6");var a={name:"user-table",data:function(){return{sortBy:"id",sortDesc:!1}},props:{fields:{type:Array},data:{type:Array},currentPage:{type:Number},perPage:{type:Number},actionTitle:{type:String}},filters:{getText:function(t,e){if(!t)return"";if("status"===e){if("wait_review"===t)return"等待评审";if("doing_review"===t)return"正在评审";if("done_review"===t)return"评审完成"}}},methods:{showUserEditModal:function(t,e){this.$emit("review",t,e)},del:function(t){var e=this;this.$swal({title:"是否删除",type:"warning",showCancelButton:!0,confirmButtonText:this.$t("TITLE_CONFIRM"),cancelButtonText:this.$t("TITLE_CANCEL"),confirmButtonColor:"#1cbb84",allowOutsideClick:!1}).then((function(n){n.value&&e.$emit("del",t)}))}}};e.default=a},"8d21":function(t,e,n){"use strict";n.r(e),n.d(e,"SideNav",(function(){return l}));var a=n("d225"),i=n("b0b4"),r=["transitionend","webkitTransitionEnd","oTransitionEnd"],s=["transition","MozTransition","webkitTransition","WebkitTransition","OTransition"],o=5,l=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(Object(a["a"])(this,t),this._el=e,this._horizontal="horizontal"===n.orientation,this._animate=!1!==n.animate&&this._supportsTransitionEnd(),this._accordion=!1!==n.accordion,this._closeChildren=Boolean(n.closeChildren),this._showDropdownOnHover=Boolean(n.showDropdownOnHover),this._rtl="rtl"===document.documentElement.getAttribute("dir")||"rtl"===document.body.getAttribute("dir"),this._lastWidth=this._horizontal?window.innerWidth:null,this._onOpen=n.onOpen||function(){},this._onOpened=n.onOpened||function(){},this._onClose=n.onClose||function(){},this._onClosed=n.onClosed||function(){},e.classList.add("sidenav"),e.classList[this._animate?"remove":"add"]("sidenav-no-animation"),this._horizontal){e.classList.add("sidenav-horizontal"),e.classList.remove("sidenav-vertical"),this._inner=e.querySelector(".sidenav-inner");var r=this._inner.parentNode;this._prevBtn=e.querySelector(".sidenav-horizontal-prev"),this._prevBtn||(this._prevBtn=document.createElement("a"),this._prevBtn.href="#",this._prevBtn.className="sidenav-horizontal-prev",r.appendChild(this._prevBtn)),this._wrapper=e.querySelector(".sidenav-horizontal-wrapper"),this._wrapper||(this._wrapper=document.createElement("div"),this._wrapper.className="sidenav-horizontal-wrapper",this._wrapper.appendChild(this._inner),r.appendChild(this._wrapper)),this._nextBtn=e.querySelector(".sidenav-horizontal-next"),this._nextBtn||(this._nextBtn=document.createElement("a"),this._nextBtn.href="#",this._nextBtn.className="sidenav-horizontal-next",r.appendChild(this._nextBtn)),this._innerPosition=0,this.update()}else{e.classList.add("sidenav-vertical"),e.classList.remove("sidenav-horizontal");var s=i||window.PerfectScrollbar;s&&(this._scrollbar=new s(e.querySelector(".sidenav-inner"),{suppressScrollX:!0,wheelPropagation:!0}))}this._bindEvents(),e.sidenavInstance=this}return Object(i["a"])(t,[{key:"open",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._closeChildren,a=this._findUnopenedParent(this._getItem(t,!0),n);if(a){var i=this._getLink(a,!0);this._horizontal&&this._isRoot(a)?(this._onOpen(this,a,i,this._findMenu(a)),this._toggleDropdown(!0,a,n),this._onOpened(this,a,i,this._findMenu(a))):(this._animate?(this._onOpen(this,a,i,this._findMenu(a)),window.requestAnimationFrame((function(){return e._toggleAnimation(!0,a,!1)}))):(this._onOpen(this,a,i,this._findMenu(a)),a.classList.add("open"),this._onOpened(this,a,i,this._findMenu(a))),this._accordion&&this._closeOther(a,n))}}},{key:"close",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._closeChildren,a=this._getItem(t,!0),i=this._getLink(t,!0);if(a.classList.contains("open")&&!a.classList.contains("disabled"))if(this._horizontal&&this._isRoot(a))this._onClose(this,a,i,this._findMenu(a)),this._toggleDropdown(!1,a,n),this._onClosed(this,a,i,this._findMenu(a));else if(this._animate)this._onClose(this,a,i,this._findMenu(a)),window.requestAnimationFrame((function(){return e._toggleAnimation(!1,a,n)}));else{if(this._onClose(this,a,i,this._findMenu(a)),a.classList.remove("open"),n)for(var r=a.querySelectorAll(".sidenav-item.open"),s=0,o=r.length;s<o;s++)r[s].classList.remove("open");this._onClosed(this,a,i,this._findMenu(a))}}},{key:"toggle",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._closeChildren,n=this._getItem(t,!0);this._getLink(t,!0);n.classList.contains("open")?this.close(n,e):this.open(n,e)}},{key:"closeAll",value:function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._closeChildren,e=this._el.querySelectorAll(".sidenav-inner > .sidenav-item.open"),n=0,a=e.length;n<a;n++)this.close(e[n],t)}},{key:"setActive",value:function(t,e){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],a=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i=this._getItem(t,!1);if(e&&a)for(var r=this._el.querySelectorAll(".sidenav-inner .sidenav-item.active"),s=0,o=r.length;s<o;s++)r[s].classList.remove("active");if(e&&n){var l=this._findParent(i,"sidenav-item",!1);l&&this.open(l)}while(i)i.classList[e?"add":"remove"]("active"),i=this._findParent(i,"sidenav-item",!1)}},{key:"setDisabled",value:function(t,e){this._getItem(t,!1).classList[e?"add":"remove"]("disabled")}},{key:"isActive",value:function(t){return this._getItem(t,!1).classList.contains("active")}},{key:"isOpened",value:function(t){return this._getItem(t,!1).classList.contains("open")}},{key:"isDisabled",value:function(t){return this._getItem(t,!1).classList.contains("disabled")}},{key:"update",value:function(){if(this._horizontal){this.closeAll();var t=Math.round(this._wrapper.getBoundingClientRect().width),e=this._innerWidth,n=this._innerPosition;t-n>e&&(n=t-e,n>0&&(n=0),this._innerPosition=n),this._updateSlider(t,e,n)}else this._scrollbar&&this._scrollbar.update()}},{key:"_updateSlider",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=null!==t?t:Math.round(this._wrapper.getBoundingClientRect().width),i=null!==e?e:this._innerWidth,r=null!==n?n:this._innerPosition;0===r?this._prevBtn.classList.add("disabled"):this._prevBtn.classList.remove("disabled"),i+r<=a?this._nextBtn.classList.add("disabled"):this._nextBtn.classList.remove("disabled")}},{key:"destroy",value:function(){if(this._el){this._unbindEvents();for(var t=this._el.querySelectorAll(".sidenav-item"),e=0,n=t.length;e<n;e++)this._unbindAnimationEndEvent(t[e]),t[e].classList.remove("sidenav-item-animating"),t[e].classList.remove("open"),t[e].style.overflow=null,t[e].style.height=null;for(var a=this._el.querySelectorAll(".sidenav-menu"),i=0,r=a.length;i<r;i++)a[i].style.marginRight=null,a[i].style.marginLeft=null;this._el.classList.remove("sidenav-no-animation"),this._wrapper&&(this._prevBtn.parentNode.removeChild(this._prevBtn),this._nextBtn.parentNode.removeChild(this._nextBtn),this._wrapper.parentNode.insertBefore(this._inner,this._wrapper),this._wrapper.parentNode.removeChild(this._wrapper),this._inner.style.marginLeft=null,this._inner.style.marginRight=null),this._el.sidenavInstance=null,delete this._el.sidenavInstance,this._el=null,this._horizontal=null,this._animate=null,this._accordion=null,this._closeChildren=null,this._showDropdownOnHover=null,this._rtl=null,this._onOpen=null,this._onOpened=null,this._onClose=null,this._onClosed=null,this._scrollbar&&(this._scrollbar.destroy(),this._scrollbar=null),this._inner=null,this._prevBtn=null,this._wrapper=null,this._nextBtn=null}}},{key:"_getLink",value:function(t,e){var n=[],a=e?"sidenav-toggle":"sidenav-link";if(t.classList.contains(a)?n=[t]:t.classList.contains("sidenav-item")&&(n=this._findChild(t,[a])),!n.length)throw new Error("`".concat(a,"` element not found."));return n[0]}},{key:"_getItem",value:function(t,e){var n=null,a=e?"sidenav-toggle":"sidenav-link";if(t.classList.contains("sidenav-item")?this._findChild(t,[a]).length&&(n=t):t.classList.contains(a)&&(n=t.parentNode.classList.contains("sidenav-item")?t.parentNode:null),!n)throw new Error("".concat(e?"Toggable ":"","`.sidenav-item` element not found."));return n}},{key:"_findUnopenedParent",value:function(t,e){var n=[],a=null;while(t)t.classList.contains("disabled")?(a=null,n=[]):(t.classList.contains("open")||(a=t),n.push(t)),t=this._findParent(t,"sidenav-item",!1);if(!a)return null;if(1===n.length)return a;n=n.slice(0,n.indexOf(a));for(var i=0,r=n.length;i<r;i++)if(n[i].classList.add("open"),this._accordion)for(var s=this._findChild(n[i].parentNode,["sidenav-item","open"]),o=0,l=s.length;o<l;o++)if(s[o]!==n[i]&&(s[o].classList.remove("open"),e))for(var c=s[o].querySelectorAll(".sidenav-item.open"),u=0,d=c.length;u<d;u++)c[u].classList.remove("open");return a}},{key:"_closeOther",value:function(t,e){for(var n=this._findChild(t.parentNode,["sidenav-item","open"]),a=0,i=n.length;a<i;a++)n[a]!==t&&this.close(n[a],e)}},{key:"_toggleAnimation",value:function(t,e,n){var a=this,i=this._getLink(e,!0),r=this._findMenu(e);this._unbindAnimationEndEvent(e);var s=Math.round(i.getBoundingClientRect().height);e.style.overflow="hidden";var o=function(){e.classList.remove("sidenav-item-animating"),e.classList.remove("sidenav-item-closing"),e.style.overflow=null,e.style.height=null,a._horizontal||a.update()};t?(e.style.height="".concat(s,"px"),e.classList.add("sidenav-item-animating"),e.classList.add("open"),this._bindAnimationEndEvent(e,(function(){o(),a._onOpened(a,e,i,r)})),setTimeout((function(){return e.style.height="".concat(s+Math.round(r.getBoundingClientRect().height),"px")}),50)):(e.style.height="".concat(s+Math.round(r.getBoundingClientRect().height),"px"),e.classList.add("sidenav-item-animating"),e.classList.add("sidenav-item-closing"),this._bindAnimationEndEvent(e,(function(){if(e.classList.remove("open"),o(),n)for(var t=e.querySelectorAll(".sidenav-item.open"),s=0,l=t.length;s<l;s++)t[s].classList.remove("open");a._onClosed(a,e,i,r)})),setTimeout((function(){return e.style.height="".concat(s,"px")}),50))}},{key:"_toggleDropdown",value:function(t,e,n){var a=this._findMenu(e);if(t){var i=Math.round(this._wrapper.getBoundingClientRect().width),r=(this._innerWidth,this._innerPosition),s=this._getItemOffset(e),l=Math.round(e.getBoundingClientRect().width);s-o<=-1*r?this._innerPosition=-1*s:s+r+l+o>=i&&(this._innerPosition=l>i?-1*s:-1*(s+l-i)),e.classList.add("open");var c=Math.round(a.getBoundingClientRect().width);s+this._innerPosition+c>i&&c<i&&c>l&&(a.style[this._rtl?"marginRight":"marginLeft"]="-".concat(c-l,"px")),this._closeOther(e,n),this._updateSlider()}else{var u=this._findChild(e,["sidenav-toggle"]);if(u.length&&u[0].removeAttribute("data-hover","true"),e.classList.remove("open"),a.style[this._rtl?"marginRight":"marginLeft"]=null,n)for(var d=a.querySelectorAll(".sidenav-item.open"),f=0,v=d.length;f<v;f++)d[f].classList.remove("open")}}},{key:"_slide",value:function(t){var e,n=Math.round(this._wrapper.getBoundingClientRect().width),a=this._innerWidth;this._innerPosition;"next"===t?(e=this._getSlideNextPos(),a+e<n&&(e=n-a)):(e=this._getSlidePrevPos(),e>0&&(e=0)),this._innerPosition=e,this.update()}},{key:"_getSlideNextPos",value:function(){var t=Math.round(this._wrapper.getBoundingClientRect().width),e=this._innerPosition,n=this._inner.childNodes[0],a=0;while(n){if(n.tagName){var i=Math.round(n.getBoundingClientRect().width);if(a+e-o<=t&&a+e+i+o>=t){i>t&&a===-1*e&&(a+=i);break}a+=i}n=n.nextSibling}return-1*a}},{key:"_getSlidePrevPos",value:function(){var t=Math.round(this._wrapper.getBoundingClientRect().width),e=this._innerPosition,n=this._inner.childNodes[0],a=0;while(n){if(n.tagName){var i=Math.round(n.getBoundingClientRect().width);if(a-o<=-1*e&&a+i+o>=-1*e){i<=t&&(a=a+i-t);break}a+=i}n=n.nextSibling}return-1*a}},{key:"_getItemOffset",value:function(t){var e=this._inner.childNodes[0],n=0;while(e!==t)e.tagName&&(n+=Math.round(e.getBoundingClientRect().width)),e=e.nextSibling;return n}},{key:"_bindAnimationEndEvent",value:function(t,e){var n=this,a=function(a){a.target===t&&(n._unbindAnimationEndEvent(t),e(a))},i=window.getComputedStyle(t).transitionDuration;i=parseFloat(i)*(-1!==i.indexOf("ms")?1:1e3),t._sideNavAnimationEndEventCb=a,r.forEach((function(e){return t.addEventListener(e,t._sideNavAnimationEndEventCb,!1)})),t._sideNavAnimationEndEventTimeout=setTimeout((function(){a({target:t})}),i+50)}},{key:"_unbindAnimationEndEvent",value:function(t){var e=t._sideNavAnimationEndEventCb;t._sideNavAnimationEndEventTimeout&&(clearTimeout(t._sideNavAnimationEndEventTimeout),t._sideNavAnimationEndEventTimeout=null),e&&(r.forEach((function(n){return t.removeEventListener(n,e,!1)})),t._sideNavAnimationEndEventCb=null)}},{key:"_bindEvents",value:function(){var t=this;this._evntElClick=function(e){var n=e.target.classList.contains("sidenav-toggle")?e.target:t._findParent(e.target,"sidenav-toggle",!1);n&&(e.preventDefault(),"true"!==n.getAttribute("data-hover")&&t.toggle(n))},this._el.addEventListener("click",this._evntElClick),this._evntWindowResize=function(){t._horizontal?t._lastWidth!==window.innerWidth&&(t._lastWidth=window.innerWidth,t.update()):t.update()},window.addEventListener("resize",this._evntWindowResize),this._horizontal&&(this._evntPrevBtnClick=function(e){e.preventDefault(),t._prevBtn.classList.contains("disabled")||t._slide("prev")},this._prevBtn.addEventListener("click",this._evntPrevBtnClick),this._evntNextBtnClick=function(e){e.preventDefault(),t._nextBtn.classList.contains("disabled")||t._slide("next")},this._nextBtn.addEventListener("click",this._evntNextBtnClick),this._evntBodyClick=function(e){!t._inner.contains(e.target)&&t._el.querySelectorAll(".sidenav-inner > .sidenav-item.open").length&&t.closeAll()},document.body.addEventListener("click",this._evntBodyClick),this._evntHorizontalElClick=function(e){var n=e.target.classList.contains("sidenav-link")?e.target:t._findParent(e.target,"sidenav-link",!1);n&&!n.classList.contains("sidenav-toggle")&&t.closeAll()},this._el.addEventListener("click",this._evntHorizontalElClick),this._showDropdownOnHover&&(this._evntInnerMousemove=function(e){var n=t._findParent(e.target,"sidenav-item",!1),a=null;while(n)a=n,n=t._findParent(n,"sidenav-item",!1);if(a&&!a.classList.contains("open")){var i=t._findChild(a,["sidenav-toggle"]);i.length&&(i[0].setAttribute("data-hover","true"),t.open(i[0],t._closeChildren,!0),setTimeout((function(){i[0].removeAttribute("data-hover")}),500))}},this._inner.addEventListener("mousemove",this._evntInnerMousemove),this._evntInnerMouseleave=function(e){t.closeAll()},this._inner.addEventListener("mouseleave",this._evntInnerMouseleave)))}},{key:"_unbindEvents",value:function(){this._evntElClick&&(this._el.removeEventListener("click",this._evntElClick),this._evntElClick=null),this._evntWindowResize&&(window.removeEventListener("resize",this._evntWindowResize),this._evntWindowResize=null),this._evntPrevBtnClick&&(this._prevBtn.removeEventListener("click",this._evntPrevBtnClick),this._evntPrevBtnClick=null),this._evntNextBtnClick&&(this._nextBtn.removeEventListener("click",this._evntNextBtnClick),this._evntNextBtnClick=null),this._evntBodyClick&&(document.body.removeEventListener("click",this._evntBodyClick),this._evntBodyClick=null),this._evntHorizontalElClick&&(this._el.removeEventListener("click",this._evntHorizontalElClick),this._evntHorizontalElClick=null),this._evntInnerMousemove&&(this._inner.removeEventListener("mousemove",this._evntInnerMousemove),this._evntInnerMousemove=null),this._evntInnerMouseleave&&(this._inner.removeEventListener("mouseleave",this._evntInnerMouseleave),this._evntInnerMouseleave=null)}},{key:"_findMenu",value:function(t){var e=t.childNodes[0],n=null;while(e&&!n)e.classList&&e.classList.contains("sidenav-menu")&&(n=e),e=e.nextSibling;if(!n)throw new Error("Cannot find `.sidenav-menu` element for the current `.sidenav-toggle`");return n}},{key:"_isRoot",value:function(t){return!this._findParent(t,"sidenav-item",!1)}},{key:"_findParent",value:function(t,e){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if("BODY"===t.tagName.toUpperCase())return null;t=t.parentNode;while("BODY"!==t.tagName.toUpperCase()&&!t.classList.contains(e))t=t.parentNode;if(t="BODY"!==t.tagName.toUpperCase()?t:null,!t&&n)throw new Error("Cannot find `.".concat(e,"` parent element"));return t}},{key:"_findChild",value:function(t,e){for(var n=t.childNodes,a=[],i=0,r=n.length;i<r;i++)if(n[i].classList){for(var s=0,o=0;o<e.length;o++)n[i].classList.contains(e[o])&&s++;e.length===s&&a.push(n[i])}return a}},{key:"_supportsTransitionEnd",value:function(){if(window.QUnit)return!1;var t=document.body||document.documentElement,e=!1;return s.forEach((function(n){"undefined"!==typeof t.style[n]&&(e=!0)})),e}},{key:"_innerWidth",get:function(){for(var t=this._inner.childNodes,e=0,n=0,a=t.length;n<a;n++)t[n].tagName&&(e+=Math.round(t[n].getBoundingClientRect().width));return e}},{key:"_innerPosition",get:function(){return parseInt(this._inner.style[this._rtl?"marginRight":"marginLeft"]||"0px")},set:function(t){return this._inner.style[this._rtl?"marginRight":"marginLeft"]="".concat(t,"px"),t}}]),t}()},"8df7":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,n("c5f6");var a={name:"form-type",props:{value:[String,Number],placeholder:String,type:String,state:Boolean,disabled:Boolean},computed:{inputVal:{get:function(){return this.value},set:function(t){this.$emit("onchage",t)}}}};e.default=a},"8e35":function(t,e,n){"use strict";var a=n("4f84"),i=n.n(a);i.a},"8fa4":function(t,e,n){"use strict";n.r(e),n.d(e,"validator",(function(){return i})),n.d(e,"invalid",(function(){return r}));var a=n("b5ae"),i=function(){return{formData:{title:{required:a["required"]},worksType:{required:a["required"]},event:{required:a["required"]}}}},r=function(){return{invalidTitle:function(t){if(!t.v.formData.title.required)return t.$t("TITLE_REQUIRED")},invalidWorksType:function(t){if(!t.v.formData.worksType.required)return t.$t("TITLE_REQUIRED")},invalidEvent:function(t){if(!t.v.formData.event.required)return t.$t("TITLE_REQUIRED")}}}},"8fcf":function(t,e,n){"use strict";n.r(e);var a=n("a986"),i=n.n(a);for(var r in a)"default"!==r&&function(t){n.d(e,t,(function(){return a[t]}))}(r);e["default"]=i.a},"8ffe":function(t,e,n){"use strict";var a=n("3572"),i=n.n(a);i.a},9239:function(t,e,n){"use strict";var a=n("4ea4");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,n("7f7f");var i=n("30d1"),r=n("c9c6"),s=n("96b6"),o=a(n("b41e")),l={name:"form-type",data:function(){return{formItem:(0,r.formItem)(this.options)}},components:{FormItem:o.default},props:{formData:{type:Object},handleType:{type:String},options:{type:Object}},validations:(0,i.validator)(),watch:{"formData.actualTickets":{handler:function(t,e){var n=this;(0,s.cal)({tickets:t,fraction:this.formData["fraction"]}).then((function(t){n.formData["totalFraction"]=t.data.totalFraction}))}},"formData.fraction":{handler:function(t,e){var n=this;(0,s.cal)({tickets:this.formData["actualTickets"],fraction:t}).then((function(t){n.formData["totalFraction"]=t.data.totalFraction}))}}},methods:{onChage:function(t){this.formData[t.name]=t.val},onSubmit:function(){var t=this;this.$v.formData.$touch(),this.$v.formData.$anyError||this.$nextTick((function(){t.$emit("save")}))}}};e.default=l},9406:function(t,e,n){"use strict";n.r(e);var a=n("54db"),i=n("30e4");for(var r in i)"default"!==r&&function(t){n.d(e,t,(function(){return i[t]}))}(r);var s=n("2877"),o=Object(s["a"])(i["default"],a["a"],a["b"],!1,null,null,null);e["default"]=o.exports},"95b7":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.filterOptions=void 0;var a=function(){return[{label:"作品编号",value:"worksNo",type:"input"},{label:"名称",value:"title",type:"input"},{label:"作者",value:"author",type:"input"},{label:"学校（单位）",value:"organization",type:"input"}]};e.filterOptions=a},"96b6":function(t,e,n){"use strict";var a=n("4ea4");Object.defineProperty(e,"__esModule",{value:!0}),e.getList=r,e.distributionReviewBy=s,e.reviewDetail=o,e.updateReview=l,e.reviewFraction=c,e.updateFraction=u,e.cal=d,e.calRank=f,e.downloadRank=v;var i=a(n("b775"));function r(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,i.default)({url:"/review/list",method:"get",params:t})}function s(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,i.default)({url:"/review/distribution_user",method:"post",data:t})}function o(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,i.default)({url:"/review/review_detail",method:"get",params:t})}function l(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,i.default)({url:"/review/".concat(t,"/update_review"),method:"post",data:e})}function c(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,i.default)({url:"/review/review_fraction",method:"get",params:t})}function u(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,i.default)({url:"/review/".concat(t,"/update_fraction"),method:"post",data:e})}function d(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,i.default)({url:"/review/cal",method:"post",data:t})}function f(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,i.default)({url:"/review/cal_rank",method:"post",data:t})}function v(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,i.default)({url:"/review/download_rank",method:"get",params:t})}},"96fd":function(t,e,n){"use strict";var a=n("25f3"),i=n("b9e5"),r=n("2877"),s=Object(r["a"])(i["default"],a["a"],a["b"],!1,null,null,null);e["default"]=s.exports},"97b0":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,n("c5f6");var a={name:"user-table",data:function(){return{sortBy:"id",sortDesc:!1}},props:{fields:{type:Array},data:{type:Array},currentPage:{type:Number},perPage:{type:Number},actionTitle:{type:String}},filters:{getText:function(t,e){if(!t)return"";if("status"===e){if("wait_review"===t)return"等待评审";if("doing_review"===t)return"正在评审";if("done_review"===t)return"评审完成"}}},methods:{showUserEditModal:function(t){this.$emit("review",t)},del:function(t){var e=this;this.$swal({title:"是否删除",type:"warning",showCancelButton:!0,confirmButtonText:this.$t("TITLE_CONFIRM"),cancelButtonText:this.$t("TITLE_CANCEL"),confirmButtonColor:"#1cbb84",allowOutsideClick:!1}).then((function(n){n.value&&e.$emit("del",t)}))}}};e.default=a},"99ac":function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("h4",{staticClass:"font-weight-bold py-2 mb-2"},[t._v("标签管理")]),t._v(" "),n("list-filter",{attrs:{filters:t.listQuery.filters,filterOptions:t.filterOptions},on:{action:t.handleFilter}}),t._v(" "),n("b-btn",{staticClass:"d-block mb-3",attrs:{variant:"primary rounded-pill"},on:{click:t.showUserCreateModal}},[n("span",{staticClass:"ion ion-md-add"}),t._v("  新增\n  ")]),t._v(" "),n("b-card",{attrs:{"no-body":""}},[n("b-card-body",[n("div",{staticClass:"row"},[n("div",{staticClass:"col"},[n("b-input",{staticClass:"d-inline-block w-auto float-sm-right",attrs:{size:"sm",placeholder:"搜寻..."},on:{input:function(e){return t.filter(e)}}})],1)])]),t._v(" "),n("div",{staticClass:"table-responsive"},[n("ListTable",{attrs:{fields:t.fields,data:t.usersData,currentPage:t.listQuery.currentPage,perPage:t.listQuery.perPage},on:{edit:t.showUserEditModal,del:t.handleDel}})],1),t._v(" "),n("b-card-body",{staticClass:"pt-0 pb-3"},[n("div",{staticClass:"row"},[n("div",{staticClass:"col-sm text-sm-left text-center pt-3"},[t.totalItems?n("span",{staticClass:"text-muted"},[t._v("Page "+t._s(t.listQuery.currentPage)+" of "+t._s(t.totalPages))]):t._e()]),t._v(" "),n("div",{staticClass:"col-sm pt-3"},[t.totalItems?n("b-pagination",{staticClass:"justify-content-center justify-content-sm-end m-0",attrs:{"total-rows":t.totalItems,"per-page":t.listQuery.perPage,size:"sm"},model:{value:t.listQuery.currentPage,callback:function(e){t.$set(t.listQuery,"currentPage",e)},expression:"listQuery.currentPage"}}):t._e()],1)])])],1),t._v(" "),n("form-modal",{ref:"addEvent",attrs:{handleType:t.handleType,options:t.options,userForm:t.userForm},on:{"update:userForm":function(e){t.userForm=e},"update:user-form":function(e){t.userForm=e},save:t.handleOperationUser}})],1)},i=[],r=(n("ac6a"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"ui-bordered px-4 pt-4 mb-4"},[n("div",{staticClass:"form-row align-items-center"},[t._l(t.filterOptions,(function(e){return n("div",{key:e.value,staticClass:"col-md-4 mb-4"},[n("label",{staticClass:"form-label"},[t._v(t._s(e.label))]),t._v(" "),n("b-input",{model:{value:t.filters[e.value],callback:function(n){t.$set(t.filters,e.value,n)},expression:"filters[item.value]"}})],1)})),t._v(" "),n("div",{staticClass:"col-md col-xl-2 mb-4"},[n("label",{staticClass:"form-label d-none d-md-block"},[t._v(" ")]),t._v(" "),n("b-btn",{attrs:{variant:"secondary",block:!0},on:{click:function(e){return t.handleSearch()}}},[t._v(t._s(t.$t("TITLE_SEARCH")))])],1)],2)])}),s=[],o={name:"user-filter",props:{filters:{type:Object,default:function(){return{username:void 0}}},filterOptions:{type:Array,default:function(){return[]}}},methods:{handleSearch:function(){this.$emit("action",this.filters)}}},l=o,c=n("2877"),u=Object(c["a"])(l,r,s,!1,null,null,null),d=u.exports,f=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b-table",{staticClass:"card-table",attrs:{items:t.data,fields:t.fields,"sort-by":t.sortBy,"sort-desc":t.sortDesc,striped:!0,bordered:!0,"current-page":t.currentPage,"per-page":t.perPage,responsive:""},on:{"update:sortBy":function(e){t.sortBy=e},"update:sort-by":function(e){t.sortBy=e},"update:sortDesc":function(e){t.sortDesc=e},"update:sort-desc":function(e){t.sortDesc=e}},scopedSlots:t._u([{key:"description",fn:function(e){return[e.item.description?n("span",[t._v(t._s(e.item.description))]):n("span",[t._v("-")])]}},{key:"actions",fn:function(e){return[n("b-btn",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{variant:"default btn-xs icon-btn md-btn-flat",title:"編輯"},on:{click:function(n){return t.showUserEditModal(e.item)}}},[n("i",{staticClass:"ion ion-md-create"})]),t._v(" "),n("b-dropdown",{attrs:{variant:"default btn-xs icon-btn md-btn-flat hide-arrow",right:!t.isRTL}},[n("template",{slot:"button-content"},[n("i",{staticClass:"ion ion-ios-settings"})]),t._v(" "),n("b-dropdown-item",{attrs:{href:"javascript:void(0)"},on:{click:function(n){return t.del(e.item)}}},[t._v("刪除")])],2)]}}])})},v=[],p=(n("c5f6"),{name:"user-table",data:function(){return{sortBy:"id",sortDesc:!1}},props:{fields:{type:Array},data:{type:Array},currentPage:{type:Number},perPage:{type:Number}},methods:{showUserEditModal:function(t){this.$emit("edit",t)},del:function(t){var e=this;this.$swal({title:"是否删除",type:"warning",showCancelButton:!0,confirmButtonText:this.$t("TITLE_CONFIRM"),cancelButtonText:this.$t("TITLE_CANCEL"),confirmButtonColor:"#1cbb84",allowOutsideClick:!1}).then((function(n){n.value&&e.$emit("del",t)}))}}}),m=p,h=Object(c["a"])(m,f,v,!1,null,null,null),b=h.exports,g=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b-modal",{ref:"userModal",attrs:{"no-close-on-backdrop":!0,"no-close-on-esc":!0,size:"Large",centered:!0,"cancel-title":"取消","ok-title":"保存"},on:{ok:t.addUser}},[n("div",{attrs:{slot:"modal-title"},slot:"modal-title"},[t._v(t._s("create"===t.handleType?"新增":"编辑"))]),t._v(" "),n("form-type",{ref:"form",attrs:{formData:t.userForm,handleType:t.handleType,options:t.options},on:{save:t.onSubmit}})],1)},_=[],y=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b-form",{on:{submit:function(e){return e.stopPropagation(),e.preventDefault(),t.onSubmit(e)}}},t._l(t.formItem,(function(e,a){return n("form-item",{key:a,attrs:{name:a,item:e,value:t.formData[a],v:t.$v},on:{onchage:t.onChage}})})),1)},C=[],w=(n("7f7f"),n("b5ae")),k=function(){return{formData:{title:{required:w["required"]}}}},O=function(){return{invalidTitle:function(t){if(!t.v.formData.title.required)return t.$t("TITLE_REQUIRED")}}},E={title:"",description:""},j=function(t){return{title:{label:"名称",placeholder:"请填写名称",state:!0,invalid:O().invalidTitle,component:"Input",required:!0},description:{label:"说明",placeholder:"请填写说明",component:"Textarea",state:!1}}},x=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b-form-group",{attrs:{label:t.item.label,"invalid-feedback":this.item.invalid&&this.item.invalid(this)}},[t.item.required?n("div",{attrs:{slot:"label"},slot:"label"},[n("i",{staticClass:"ion ion-ios-medical text-left text-danger"}),t._v("\n    "+t._s(t.item.label)+"\n  ")]):t._e(),t._v(" "),n(t.item.component,{tag:"component",attrs:{placeholder:t.item.placeholder,value:t.value,state:t.item.state&&t.v.formData[t.name].$dirty?!t.v.formData[t.name].$error:null,options:t.item.options},on:{onchage:t.onChage}})],1)},T=[],$=n("b7e9"),D=n("c2ac"),P=n("00f4"),S=n("c164"),L={name:"form-item",components:{CheckGroup:$["default"],Input:D["default"],Switcher:P["default"],Textarea:S["default"]},props:{name:String,value:[Number,String,Boolean,Array],item:Object,v:Object},methods:{onChage:function(t){this.$emit("onchage",{name:this.name,val:t})}}},I=L,F=Object(c["a"])(I,x,T,!1,null,null,null),M=F.exports,B={name:"form-type",data:function(){return{formItem:j(this.options)}},components:{FormItem:M},props:{formData:{type:Object},handleType:{type:String},options:{type:Object}},validations:k(),methods:{onChage:function(t){this.formData[t.name]=t.val},onSubmit:function(){var t=this;this.$v.formData.$touch(),this.$v.formData.$anyError||this.$nextTick((function(){t.$emit("save")}))}}},A=B,R=Object(c["a"])(A,y,C,!1,null,null,null),N=R.exports,U={name:"form-modal",components:{FormType:N},props:{handleType:{type:String},userForm:{type:Object},options:{type:Object}},methods:{addUser:function(t){t.preventDefault(),this.$refs.form.onSubmit()},onSubmit:function(){var t=this;this.$nextTick((function(){t.$emit("save")}))}}},q=U,z=Object(c["a"])(q,g,_,!1,null,null,null),Q=z.exports,H=n("ed08"),V=n("dea6"),W=function(){return{currentPage:1,perPage:20,filters:{title:void 0}}},K=function(){return["id","title"]},G=function(){return[{label:"ID",key:"id",sortable:!0,tdClass:"align-middle"},{label:"名称",key:"title",sortable:!0,tdClass:"align-middle"},{label:"说明",key:"description",sortable:!0,tdClass:"align-middle"},{label:"创建时间",key:"createdAt",sortable:!0,tdClass:"align-middle"},{key:"actions",label:" ",tdClass:"text-nowrap align-middle text-center"}]},Y=function(){return[{label:"名称",value:"title",type:"input"}]},J=n("83d6"),X={name:"Tab",components:{ListFilter:d,ListTable:b,FormModal:Q},computed:{totalItems:function(){return this.usersData.length},totalPages:function(){return Math.ceil(this.totalItems/this.listQuery.perPage)}},data:function(){return{searchKeys:K(),handleType:"create",usersData:[],userForm:E,listQuery:W(),filterOptions:Y(),fields:G(),originalUsersData:[],options:{}}},created:function(){this.getList()},methods:{getList:function(){var t=this;Object(V["getTabList"])(this.listQuery).then((function(e){t.usersData=e.data.items,t.originalUsersData=e.data.items.slice(0)})).catch((function(t){console.log(t)}))},handleFilter:function(){this.getList()},showUserCreateModal:function(){this.userForm=E,this.handleType="create",this.$refs["addEvent"].$refs["form"].$v&&this.$refs["addEvent"].$refs["form"].$v.$reset(),this.$refs["addEvent"].$refs.userModal.show()},showUserEditModal:function(t){this.handleType="edit",this.userForm=t,this.$refs["addEvent"].$refs["form"].$v&&this.$refs["addEvent"].$refs["form"].$v.$reset(),this.$refs["addEvent"].$refs.userModal.show()},filter:function(t){var e=this,n=t.toLowerCase(),a=this.originalUsersData.filter((function(t){return-1!==Object.keys(t).filter((function(t){return e.searchKeys.includes(t)})).map((function(e){return String(t[e])})).join("|").toLowerCase().indexOf(n)||!n}));this.usersData=a},handleOperationUser:function(){"create"===this.handleType?this.handleCreateData():this.handleUpdateData()},handleCreateData:function(){var t=this;Object(V["createTab"])(this.userForm).then((function(e){t.usersData.unshift(e.data),t.$refs["addEvent"].$refs.userModal.hide(),Object(H["notify"])(J.successAlert,"Success","创建成功")})).catch((function(t){console.log(t)}))},handleUpdateData:function(){var t=this,e=this.userForm.id;Object(V["updateTab"])(e,this.userForm).then((function(e){t.userForm=e.data,t.getList(),t.$refs["addEvent"].$refs.userModal.hide(),Object(H["notify"])(J.successAlert,"Success","更新成功")})).catch((function(t){console.log(t)}))},handleDel:function(t){var e=this;Object(V["deleteTab"])(t.id,t).then((function(t){Object(H["notify"])(J.successAlert,"Success","删除成功"),e.getList()})).catch((function(t){console.log(t)}))}}},Z=X,tt=(n("8e35"),Object(c["a"])(Z,a,i,!1,null,null,null));e["default"]=tt.exports},"9a20":function(t,e,n){"use strict";var a=n("71f1"),i=n.n(a);i.a},"9be1":function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b-table",{staticClass:"card-table",attrs:{items:t.data,fields:t.fields,"sort-by":t.sortBy,"sort-desc":t.sortDesc,striped:!0,bordered:!0,"current-page":t.currentPage,"per-page":t.perPage,responsive:"","sticky-header":!0},on:{"update:sortBy":function(e){t.sortBy=e},"update:sort-by":function(e){t.sortBy=e},"update:sortDesc":function(e){t.sortDesc=e},"update:sort-desc":function(e){t.sortDesc=e}},scopedSlots:t._u([{key:"status",fn:function(e){return[n("span",[t._v(t._s(t._f("getText")(e.item.status,"status")))])]}},{key:"actualFraction",fn:function(e){return[e.item.isEdit?n("b-input",{model:{value:e.item.actualFraction,callback:function(n){t.$set(e.item,"actualFraction",n)},expression:"data.item.actualFraction"}}):n("span",[t._v(t._s(e.item.actualFraction))])]}},{key:"rank",fn:function(e){return[e.item.isEdit?n("b-input",{model:{value:e.item.rank,callback:function(n){t.$set(e.item,"rank",n)},expression:"data.item.rank"}}):n("span",[t._v(t._s(e.item.rank))])]}},{key:"actions",fn:function(e){return[n("b-btn",{attrs:{variant:"default btn-xs md-btn-flat"},on:{click:function(n){return t.showUserEditModal(e.item,!0)}}},[n("i",{staticClass:"ion ion-md-create"}),t._v("\n      "+t._s(e.item.isEdit?"确定":t.actionTitle)+"\n    ")]),t._v(" "),e.item.isEdit?n("b-btn",{attrs:{variant:"default btn-xs md-btn-flat"},on:{click:function(n){return t.showUserEditModal(e.item,!1)}}},[t._v("取消")]):t._e()]}}])})},i=[];n.d(e,"a",(function(){return a})),n.d(e,"b",(function(){return i}))},"9ed6":function(t,e,n){"use strict";n.r(e);var a,i,r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"authentication-wrapper authentication-2 ui-bg-cover ui-bg-overlay-container px-4",style:"background-image: url('"+t.baseUrl+"img/bg/1.jpg');"},[a("div",{staticClass:"ui-bg-overlay bg-dark opacity-25"}),t._v(" "),a("div",{staticClass:"authentication-inner py-5"},[a("b-card",{attrs:{"no-body":""}},[a("div",{staticClass:"p-4 p-sm-5"},[a("div",{staticClass:"d-flex justify-content-center align-items-center pb-2 mb-4"},[a("div",{staticClass:"ui-w-60"},[a("img",{attrs:{width:"60px",src:n("cf05")}})])]),t._v(" "),a("h5",{staticClass:"text-center text-muted font-weight-normal mb-4"},[t._v("珠江口白海豚保护公益活动管理系统")]),t._v(" "),a("b-form",{on:{submit:t.onSubmit}},[a("b-form-group",{attrs:{id:"username",label:t.$t("TITLE_USERNAME")}},[a("b-input",{attrs:{required:""},model:{value:t.loginForm.username,callback:function(e){t.$set(t.loginForm,"username",e)},expression:"loginForm.username"}})],1),t._v(" "),a("b-form-group",{attrs:{id:"password"}},[a("div",{staticClass:"d-flex justify-content-between align-items-end",attrs:{slot:"label"},slot:"label"},[a("div",[t._v(t._s(t.$t("TITLE_PASSWORD")))])]),t._v(" "),a("b-input",{attrs:{type:"password",required:""},model:{value:t.loginForm.password,callback:function(e){t.$set(t.loginForm,"password",e)},expression:"loginForm.password"}})],1),t._v(" "),a("div",{staticClass:"d-flex justify-content-between align-items-center m-0"},[a("b-check",{staticClass:"m-0",model:{value:t.loginForm.rememberMe,callback:function(e){t.$set(t.loginForm,"rememberMe",e)},expression:"loginForm.rememberMe"}},[t._v(t._s(t.$t("TITLE_REMEMBER_ME")))]),t._v(" "),a("ladda-btn",{staticClass:"btn btn-primary",attrs:{loading:t.submitLoading,type:"submit","data-style":"expand-left"}},[t._v(t._s(t.$t("TITLE_SIGN_IN")))])],1)],1)],1)])],1)])},s=[],o=(n("ac6a"),n("ca1c")),l={name:"ladda-btn",props:{loading:{default:!1},tag:{type:String,default:"button"}},render:function(t){var e="button"===this.tag?{type:"button"}:{};return t(this.tag,{attrs:e},this.$slots.default)},beforeDestroy:function(){this.ladda&&(this.ladda.remove(),this.ladda=null)},mounted:function(){this.ladda=o["a"](this.$el)},watch:{loading:function(t){this.ladda&&("boolean"===typeof t?this.ladda[t?"start":"stop"]():"number"===typeof t&&(this.ladda.isLoading()||this.ladda.start(),this.ladda.setProgress(t)))}}},c=l,u=(n("707b"),n("2877")),d=Object(u["a"])(c,a,i,!1,null,null,null),f=d.exports,v={name:"login",metaInfo:{title:"登录"},components:{LaddaBtn:f},data:function(){return{loginForm:{username:"",password:"",rememberMe:!1},submitLoading:!1,redirect:void 0,otherQuery:{}}},watch:{$route:{handler:function(t){var e=t.query;e&&(this.redirect=e.redirect,this.otherQuery=this.getOtherQuery(e))},immediate:!0}},methods:{onSubmit:function(t){var e=this;t.preventDefault(),this.submitLoading=!0,this.$store.dispatch("user/login",this.loginForm).then((function(){e.$router.push({path:e.redirect||"/",query:e.otherQuery}),e.submitLoading=!1})).catch((function(){e.submitLoading=!1}))},getOtherQuery:function(t){return Object.keys(t).reduce((function(e,n){return"redirect"!==n&&(e[n]=t[n]),e}),{})}}},p=v,m=(n("42cd"),Object(u["a"])(p,r,s,!1,null,null,null));e["default"]=m.exports},a18c:function(t,e,n){"use strict";var a=n("4ea4");Object.defineProperty(e,"__esModule",{value:!0}),e.resetRouter=f,e.default=e.asyncRoutes=e.constantRoutes=void 0;var i=a(n("e54b")),r=a(n("2b0e")),s=a(n("8c4f")),o=a(n("ac48"));r.default.use(s.default);var l=[{path:"/login",component:function(){return Promise.resolve().then((function(){return(0,i.default)(n("9ed6"))}))},meta:{title:"TITLE_LOGIN"},hidden:!0},{path:"/",component:o.default,redirect:"/dashboard",children:[{path:"dashboard",component:function(){return Promise.resolve().then((function(){return(0,i.default)(n("9406"))}))},name:"Dashboard",meta:{title:"TITLE_DASHBOARD",icon:"ion ion-md-speedometer"}}]},{path:"/event",component:o.default,children:[{path:"index",component:function(){return Promise.resolve().then((function(){return(0,i.default)(n("f061"))}))},name:"Event",meta:{title:"投票项",icon:"ion ion-md-star"}}]},{path:"/works",component:o.default,children:[{path:"index",component:function(){return Promise.resolve().then((function(){return(0,i.default)(n("56fa"))}))},name:"Works",meta:{title:"作品",icon:"ion ion-md-folder"}}]},{path:"/review",component:o.default,children:[{path:"index",component:function(){return Promise.resolve().then((function(){return(0,i.default)(n("c1f0"))}))},name:"Review",meta:{title:"评审",icon:"ion ion-md-eye"}}]},{path:"/tab",component:o.default,children:[{path:"index",component:function(){return Promise.resolve().then((function(){return(0,i.default)(n("99ac"))}))},name:"Tab",meta:{title:"标签",icon:"ion ion-md-pricetags"}}]},{path:"/weapp_user",component:o.default,children:[{path:"index",component:function(){return Promise.resolve().then((function(){return(0,i.default)(n("b14c"))}))},name:"WeappUser",meta:{title:"小程序用户",icon:"ion ion-md-people"}}]},{path:"/user",component:o.default,children:[{path:"index",component:function(){return Promise.resolve().then((function(){return(0,i.default)(n("e382"))}))},name:"User",meta:{title:"TITLE_USER_MANAGER",icon:"ion ion-md-people"}}]},{path:"/setting",component:o.default,children:[{path:"index",name:"Profile",component:function(){return Promise.resolve().then((function(){return(0,i.default)(n("7424"))}))},meta:{title:"TITLE_PROFILE"},hidden:!0},{path:"system",name:"System",component:function(){return Promise.resolve().then((function(){return(0,i.default)(n("a902"))}))},meta:{title:"TITLE_SYSTEM_SETTING",icon:"ion ion-md-hammer"}}]}];e.constantRoutes=l;var c=[{path:"*",redirect:"/404",hidden:!0}];e.asyncRoutes=c;var u=function(){return new s.default({mode:"history",scrollBehavior:function(){return{y:0}},routes:l})},d=u();function f(){var t=u();d.matcher=t.matcher}var v=d;e.default=v},a21c:function(t,e,n){"use strict";n.r(e);var a=n("01be"),i=n.n(a);for(var r in a)"default"!==r&&function(t){n.d(e,t,(function(){return a[t]}))}(r);e["default"]=i.a},a86d:function(t,e,n){},a902:function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("h4",{staticClass:"font-weight-bold py-2 mb-3"},[t._v("设定")]),t._v(" "),n("b-tabs",{staticClass:"nav-tabs-top mb-4"},[n("b-tab",{attrs:{title:"系统设定",active:""}},[n("div",{staticClass:"card-body"},[n("b-card-body",[n("b-form",{on:{submit:function(e){return e.stopPropagation(),e.preventDefault(),t.handleSave("system")}}},[n("b-form-group",{attrs:{label:"系统名称"}},[n("b-input",{model:{value:t.setting.system.name,callback:function(e){t.$set(t.setting.system,"name",e)},expression:"setting.system.name"}})],1),t._v(" "),n("b-form-group",{attrs:{label:"LOGO"}},[n("single-upload-file",{attrs:{action:"#"},model:{value:t.setting.system.logo,callback:function(e){t.$set(t.setting.system,"logo",e)},expression:"setting.system.logo"}})],1),t._v(" "),n("div",{staticClass:"text-right mt-3"},[n("b-btn",{attrs:{variant:"primary",type:"submit"}},[t._v("保存")])],1)],1)],1)],1)]),t._v(" "),n("b-tab",{attrs:{title:"一般设定"}},[n("div",{staticClass:"card-body"},[n("b-card-body",[n("b-form",{on:{submit:function(e){return e.stopPropagation(),e.preventDefault(),t.handleSave("normal")}}},[n("b-form-group",{attrs:{label:"Debug"}},[n("v-jsoneditor",{attrs:{plus:!1,height:"400px"},on:{error:t.onError},model:{value:t.setting.normal.debug,callback:function(e){t.$set(t.setting.normal,"debug",e)},expression:"setting.normal.debug"}})],1),t._v(" "),n("div",{staticClass:"text-right mt-3"},[n("b-btn",{attrs:{variant:"primary",type:"submit"}},[t._v("保存")])],1)],1)],1)],1)])],1)],1)},i=[],r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{style:t.styles},[n("file-upload",{ref:"upload",class:t.componentClass,attrs:{"post-action":t.action,extensions:t.extensions,accept:t.accept,size:t.size},on:{"input-filter":t.inputFilter,"input-file":t.inputFile},model:{value:t.files,callback:function(e){t.files=e},expression:"files"}},[n("i",{staticClass:"fa fa-plus"}),t._v(" "),0==t.files.length?n("span",[t._v("选择文件")]):n("span",[t._v("重新选择文件")])]),t._v(" "),n("div",{staticClass:"tips"},[t._v("支持上传文件："+t._s(t.accept))]),t._v(" "),t._l(t.files,(function(e,a){return n("div",{key:a},[100==Number(e.progress)?[n("a",{attrs:{href:JSON.parse(e.response).data.url,target:"_blank"}},[t._v("查看文件")]),t._v(" "),n("i",{staticClass:"fa fa-minus-square pl-2 text-danger",on:{click:function(n){return n.preventDefault(),t.$refs.upload.remove(e)}}})]:[n("b-progress",{attrs:{value:Number(e.progress),height:"0.75rem"}})]],2)}))],2)},s=[],o=(n("7f7f"),n("c5f6"),n("8019")),l=n.n(o),c={name:"single-upload-file",props:{styles:String,accept:{type:String,default:"image/png, image/gif, image/jpeg, image/webp"},extensions:{type:String,default:"gif,jpg,jpeg,png,webp"},size:{type:Number,default:10485760},componentClass:{type:String,default:"btn btn-primary"},action:{type:String,required:!0}},components:{FileUpload:l.a},data:function(){return{files:[]}},methods:{inputFilter:function(t,e,n){if(t&&!e){if(/(\/|^)(Thumbs\.db|desktop\.ini|\..+)$/.test(t.name))return n();if(/\.(php5?|html?|jsx?)$/i.test(t.name))return n()}},inputFile:function(t,e){t&&!e&&console.log("add",t),t&&e&&console.log("update",t),!t&&e&&console.log("remove",e),Boolean(t)===Boolean(e)&&e.error===t.error||this.$refs.upload.active||(this.$refs.upload.active=!0)}}},u=c,d=(n("61c9"),n("2877")),f=Object(d["a"])(u,r,s,!1,null,null,null),v=f.exports,p=n("b775");function m(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(p["default"])({url:"/setting/info",method:"get",params:t})}function h(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(p["default"])({url:"/setting/update",method:"post",data:t})}var b=n("ed08"),g=n("dcf4"),_=n.n(g),y=n("83d6"),C={components:{SingleUploadFile:v,VJsoneditor:_.a},data:function(){return{setting:{system:{name:void 0,logo:void 0},normal:{isGray:!1}}}},created:function(){this.getSetting()},methods:{getSetting:function(){var t=this;m().then((function(e){t.setting=e.data})).catch((function(t){console.log(t)}))},handleSave:function(t){h(this.setting[t]).then((function(t){Object(b["notify"])(y.successAlert,"Success","更新成功")})).catch((function(t){console.log(t)}))},onError:function(){console.log("error")}}},w=C,k=Object(d["a"])(w,a,i,!1,null,"01719032",null);e["default"]=k.exports},a986:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,n("ac6a"),n("7514"),n("c5f6");var a={name:"user-table",data:function(){return{sortBy:"id",sortDesc:!1}},props:{fields:{type:Array},data:{type:Array},currentPage:{type:Number},perPage:{type:Number},options:{type:Object}},filters:{getText:function(t,e,n){if(!t)return"";if("worksType"===e)return n.worksType.find((function(e){return e.value===t})).text;if("status"===e){if("wait_review"===t)return"等待评审";if("doing_review"===t)return"正在评审";if("done_review"===t)return"评审完成"}else{if("event"===e)return n.events.find((function(e){return e.value===t})).text;if("tabs"===e){var a=[];return t.forEach((function(t){a.push(n.tabs.find((function(e){return e.value===t})).text)})),a.length>0?a.join(","):"-"}}}},methods:{showUserEditModal:function(t){this.$emit("edit",t)},del:function(t){var e=this;this.$swal({title:"是否删除",type:"warning",showCancelButton:!0,confirmButtonText:this.$t("TITLE_CONFIRM"),cancelButtonText:this.$t("TITLE_CANCEL"),confirmButtonColor:"#1cbb84",allowOutsideClick:!1}).then((function(n){n.value&&e.$emit("del",t)}))}}};e.default=a},ac48:function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"layout-wrapper layout-2"},[n("div",{staticClass:"layout-inner"},[n("app-layout-sidenav"),t._v(" "),n("div",{staticClass:"layout-container"},[n("app-layout-navbar"),t._v(" "),n("div",{staticClass:"layout-content"},[n("div",{staticClass:"router-transitions container-fluid flex-grow-1 container-p-y"},[n("router-view")],1),t._v(" "),n("app-layout-footer")],1)],1)],1),t._v(" "),n("div",{staticClass:"layout-overlay",on:{click:t.closeSidenav}})])},i=[],r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b-navbar",{staticClass:"layout-navbar align-items-lg-center container-p-x",attrs:{toggleable:"lg",variant:t.getLayoutNavbarBg()}},[n("b-navbar-brand",{staticClass:"app-brand demo d-lg-none py-0 mr-4",attrs:{to:"/"}},[n("span",{staticClass:"app-brand-text demo font-weight-normal ml-2"},[t._v(t._s(t.$t(t.websiteTitle)))])]),t._v(" "),t.sidenavToggle?n("b-navbar-nav",{staticClass:"layout-sidenav-toggle d-lg-none align-items-lg-center mr-auto"},[n("a",{staticClass:"nav-item nav-link px-0 mr-lg-4",attrs:{href:"javascript:void(0)"},on:{click:t.toggleSidenav}},[n("i",{staticClass:"ion ion-md-menu text-large align-middle"})])]):t._e(),t._v(" "),n("b-navbar-toggle",{attrs:{target:"app-layout-navbar"}}),t._v(" "),n("b-collapse",{attrs:{"is-nav":"",id:"app-layout-navbar"}},[n("hr",{staticClass:"d-lg-none w-100 my-2"}),t._v(" "),n("b-navbar-nav",{staticClass:"align-items-lg-center ml-auto"},[n("b-nav-item-dropdown",{staticClass:"demo-navbar-user",attrs:{right:!t.isRTL}},[n("template",{slot:"button-content"},[n("span",{staticClass:"d-inline-flex flex-lg-row-reverse align-items-center align-middle"},[n("img",{staticClass:"d-block ui-w-30 rounded-circle",attrs:{src:t.baseUrl+"img/avatars/1.png",alt:""}}),t._v(" "),n("span",{staticClass:"px-1 mr-lg-2 ml-2 ml-lg-0"},[t._v(t._s(t.name))])])]),t._v(" "),n("b-dd-item",{on:{click:t.handleProfile}},[n("i",{staticClass:"ion ion-ios-person text-lightest"}),t._v("\n            "+t._s(t.$t("TITLE_PROFILE"))+"\n        ")]),t._v(" "),n("b-dd-divider"),t._v(" "),n("b-dd-item",{on:{click:t.handleLogout}},[n("i",{staticClass:"ion ion-ios-log-out text-danger"}),t._v("\n            "+t._s(t.$t("TITLE_LOGOUT"))+"\n        ")])],2)],1)],1)],1)},s=[],o=(n("8e6e"),n("ac6a"),n("96cf"),n("3b8d")),l=(n("7f7f"),n("bd86")),c=n("2f62");function u(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function d(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?u(n,!0).forEach((function(e){Object(l["a"])(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):u(n).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var f={name:"app-layout-navbar",props:{sidenavToggle:{type:Boolean,default:!0}},computed:d({},Object(c["c"])({name:function(t){return t.user.name}})),methods:{toggleSidenav:function(){this.layoutHelpers.toggleCollapsed()},getLayoutNavbarBg:function(){return this.layoutNavbarBg},handleProfile:function(){this.$router.push({name:"Profile"})},handleLogout:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$store.dispatch("user/logout");case 2:this.$router.push("/login?redirect=".concat(this.$route.fullPath));case 3:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()}},v=f,p=n("2877"),m=Object(p["a"])(v,r,s,!1,null,null,null),h=m.exports,b=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("sidenav",{class:t.curClasses,attrs:{orientation:t.orientation}},["horizontal"!==t.orientation?a("div",{staticClass:"app-brand demo"},[a("span",{staticClass:"app-brand-logo demo",staticStyle:{overflow:"initial"}},[a("img",{attrs:{width:"40px",src:n("cf05")}})]),t._v(" "),a("router-link",{staticClass:"app-brand-text demo sidenav-text font-weight-normal ml-2",attrs:{to:"/"}},[t._v(t._s(t.$t(t.websiteTitle)))]),t._v(" "),a("a",{staticClass:"layout-sidenav-toggle sidenav-link text-large ml-auto",attrs:{href:"javascript:void(0)"},on:{click:function(e){return t.toggleSidenav()}}},[a("i",{staticClass:"ion ion-md-menu align-middle"})])],1):t._e(),t._v(" "),"horizontal"!==t.orientation?a("div",{staticClass:"sidenav-divider mt-0"}):t._e(),t._v(" "),a("div",{staticClass:"sidenav-inner",class:{"py-1":"horizontal"!==t.orientation}},t._l(t.permission_routes,(function(t){return a("layout-sidenav-item",{key:t.path,attrs:{item:t,"base-path":t.path}})})),1)])},g=[],_=(n("a481"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("nav",{staticClass:"sidenav",class:"sidenav-"+t.orientation},[t._t("default")],2)}),y=[],C=n("b7f5"),w=n("8d21").SideNav,k={name:"sidenav",props:{orientation:{type:String,default:"vertical"},animate:{type:Boolean,default:!0},accordion:{type:Boolean,default:!0},closeChildren:{type:Boolean,default:!1},showDropdownOnHover:{type:Boolean,default:!1},onOpen:Function,onOpened:Function,onClose:Function,onClosed:Function},mounted:function(){this.orientation="horizontal"===this.orientation?"horizontal":"vertical",this.sidenav=new w(this.$el,{orientation:this.orientation,animate:this.animate,accordion:this.accordion,closeChildren:this.closeChildren,showDropdownOnHover:this.showDropdownOnHover,onOpen:this.onOpen,onOpened:this.onOpened,onClose:this.onClose,onClosed:this.onClosed},C["a"])},beforeDestroy:function(){this.sidenav&&this.sidenav.destroy(),this.sidenav=null}},O=k,E=(n("034e"),Object(p["a"])(O,_,y,!1,null,null,null)),j=E.exports,x=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"sidenav-item",class:{active:t.active,disabled:t.disabled}},[n("a",{staticClass:"sidenav-link",class:t.linkClass,attrs:{href:t.href,target:t.target}},[t.icon?n("i",{staticClass:"sidenav-icon",class:t.icon}):t._e(),t._v(" "),n("div",[t._t("default")],2),t._v(" "),t.badge?n("div",{staticClass:"pl-1 ml-auto"},[n("div",{staticClass:"badge",class:t.badgeClass},[t._v(t._s(t.badge))])]):t._e()])])},T=[],$={name:"sidenav-link",props:{href:String,icon:String,target:{type:String,default:"_self"},linkClass:{type:String,default:""},badge:{default:null},badgeClass:{type:String,default:""},disabled:{type:Boolean,default:!1},active:{type:Boolean,default:!1}}},D=$,P=Object(p["a"])(D,x,T,!1,null,null,null),S=(P.exports,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("router-link",{staticClass:"sidenav-item",class:{active:t.active,disabled:t.disabled},attrs:{tag:"div","active-class":"active",to:t.to,replace:t.replace,append:t.append,exact:t.exact,event:t.event}},[n("a",{staticClass:"sidenav-link",class:t.linkClass},[t.icon?n("i",{staticClass:"sidenav-icon",class:t.icon}):t._e(),t._v(" "),n("div",[t._t("default")],2),t._v(" "),t.badge?n("div",{staticClass:"pl-1 ml-auto"},[n("div",{staticClass:"badge",class:t.badgeClass},[t._v(t._s(t.badge))])]):t._e()])])}),L=[],I={name:"sidenav-router-link",props:{to:null,replace:{type:Boolean,default:!1},append:{type:Boolean,default:!1},exact:{type:Boolean,default:!1},event:null,icon:String,linkClass:{type:String,default:""},badge:{default:null},badgeClass:{type:String,default:""},disabled:{type:Boolean,default:!1},active:{type:Boolean,default:!1}}},F=I,M=Object(p["a"])(F,S,L,!1,null,null,null),B=M.exports,A=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"sidenav-item",class:{active:t.active,disabled:t.disabled,open:t.open}},[n("a",{staticClass:"sidenav-link sidenav-toggle",class:t.linkClass,attrs:{href:"javascript:void(0)"}},[t.icon?n("i",{staticClass:"sidenav-icon",class:t.icon}):t._e(),t._v(" "),n("div",[t._t("link-text")],2),t._v(" "),t.badge?n("div",{staticClass:"pl-1 ml-auto"},[n("div",{staticClass:"badge",class:t.badgeClass},[t._v(t._s(t.badge))])]):t._e()]),t._v(" "),n("div",{staticClass:"sidenav-menu"},[t._t("default")],2)])},R=[],N={name:"sidenav-menu",props:{icon:String,linkClass:{type:String,default:""},badge:{default:null},badgeClass:{type:String,default:""},disabled:{type:Boolean,default:!1},active:{type:Boolean,default:!1},open:{type:Boolean,default:!1}}},U=N,q=Object(p["a"])(U,A,R,!1,null,null,null),z=q.exports,Q=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"sidenav-header"},[t._t("default")],2)},H=[],V={name:"sidenav-header"},W=V,K=Object(p["a"])(W,Q,H,!1,null,null,null),G=(K.exports,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"sidenav-block"},[t._t("default")],2)}),Y=[],J={name:"sidenav-block"},X=J,Z=Object(p["a"])(X,G,Y,!1,null,null,null),tt=(Z.exports,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"sidenav-divider"})}),et=[],nt={name:"sidenav-divider"},at=nt,it=Object(p["a"])(at,tt,et,!1,null,null,null),rt=(it.exports,function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.item.hidden||!t.hasOneShowingChild(t.item.children,t.item)||t.onlyOneChild.children&&!t.onlyOneChild.noShowingChildren||t.item.alwaysShow?t.item.hidden?t._e():n("sidenav-menu",{attrs:{icon:t.item.meta&&t.item.meta.icon,active:t.isMenuActive(t.item.path),open:t.isMenuOpen(t.item.path)}},[n("template",{slot:"link-text"},[t._v(t._s(t.$t(t.item.meta.title)))]),t._v(" "),t._l(t.item.children,(function(e){return n("layout-sidenav-item",{key:e.path,attrs:{item:e,"base-path":t.resolvePath(e.path)}})}))],2):n("sidenav-router-link",{attrs:{icon:t.onlyOneChild.meta.icon||t.item.meta&&t.item.meta.icon,active:t.isMenuActive(this.onlyOne?t.onlyOneChild.path:t.item.path),open:t.isMenuOpen(this.onlyOne?t.onlyOneChild.path:t.item.path),to:t.resolvePath(t.onlyOneChild.path),exact:!0}},[t._v(t._s(t.$t(t.onlyOneChild.meta.title)))])}),st=[],ot=n("df7c"),lt=n.n(ot);function ct(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function ut(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ct(n,!0).forEach((function(e){Object(l["a"])(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ct(n).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var dt={name:"layout-sidenav-item",components:{SidenavRouterLink:B,SidenavMenu:z},props:{item:{type:Object,required:!0},isNest:{type:Boolean,default:!1},basePath:{type:String,default:""}},data:function(){return this.onlyOneChild=null,this.onlyOne=!1,{}},methods:{hasOneShowingChild:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1?arguments[1]:void 0,a=e.filter((function(e){return!e.hidden&&(t.onlyOneChild=e,!0)}));return 1===a.length?(this.onlyOne=!0,!0):0===a.length&&(this.onlyOneChild=ut({},n,{path:"",noShowingChildren:!0}),!0)},resolvePath:function(t){return lt.a.resolve(this.basePath,t)},isMenuActive:function(t){return 0===this.$route.path.indexOf(t)},isMenuOpen:function(t){return 0===this.$route.path.indexOf(t)&&"horizontal"!==this.orientation},toggleSidenav:function(){this.layoutHelpers.toggleCollapsed()}}},ft=dt,vt=Object(p["a"])(ft,rt,st,!1,null,null,null),pt=vt.exports;function mt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function ht(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?mt(n,!0).forEach((function(e){Object(l["a"])(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):mt(n).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var bt={name:"app-layout-sidenav",components:{Sidenav:j,LayoutSidenavItem:pt},props:{orientation:{type:String,default:"vertical"}},computed:ht({},Object(c["b"])(["permission_routes"]),{curClasses:function(){var t=this.layoutSidenavBg;return"horizontal"!==this.orientation||-1===t.indexOf(" sidenav-dark")&&-1===t.indexOf(" sidenav-light")||(t=t.replace(" sidenav-dark","").replace(" sidenav-light","").replace("-darker","").replace("-dark","")),"bg-".concat(t," ")+("horizontal"!==this.orientation?"layout-sidenav":"layout-sidenav-horizontal container-p-x flex-grow-0")}}),methods:{isMenuActive:function(t){return 0===this.$route.path.indexOf(t)},isMenuOpen:function(t){return 0===this.$route.path.indexOf(t)&&"horizontal"!==this.orientation},toggleSidenav:function(){this.layoutHelpers.toggleCollapsed()}}},gt=bt,_t=Object(p["a"])(gt,b,g,!1,null,null,null),yt=_t.exports,Ct=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("nav",{staticClass:"layout-footer footer",class:t.getLayoutFooterBg()},[n("div",{staticClass:"container-fluid d-flex flex-wrap justify-content-between text-center container-p-x pb-3"},[n("div",{staticClass:"pt-3"},[n("span",{staticClass:"footer-text font-weight-bolder"},[t._v(t._s(t.$t(t.websiteTitle)))]),t._v(" ©\n    ")]),t._v(" "),n("div",[n("a",{staticClass:"footer-link pt-3",attrs:{href:"javascript:void(0)"}},[t._v(t._s(t.$t("TITLE_ABOUT_US")))])])])])},wt=[],kt={name:"app-layout-footer",methods:{getLayoutFooterBg:function(){return"bg-".concat(this.layoutFooterBg)}}},Ot=kt,Et=Object(p["a"])(Ot,Ct,wt,!1,null,null,null),jt=Et.exports,xt={name:"layout",components:{"app-layout-navbar":h,"app-layout-sidenav":yt,"app-layout-footer":jt},mounted:function(){this.layoutHelpers.init(),this.layoutHelpers.update(),this.layoutHelpers.setAutoUpdate(!0)},beforeDestroy:function(){this.layoutHelpers.destroy()},methods:{closeSidenav:function(){this.layoutHelpers.setCollapsed(!0)}}},Tt=xt,$t=Object(p["a"])(Tt,a,i,!1,null,null,null);e["default"]=$t.exports},b09d:function(t,e,n){"use strict";n.r(e);var a=n("8df7"),i=n.n(a);for(var r in a)"default"!==r&&function(t){n.d(e,t,(function(){return a[t]}))}(r);e["default"]=i.a},b14c:function(t,e,n){"use strict";n.r(e);var a=n("8674"),i=n("eb51");for(var r in i)"default"!==r&&function(t){n.d(e,t,(function(){return i[t]}))}(r);n("8e35");var s=n("2877"),o=Object(s["a"])(i["default"],a["a"],a["b"],!1,null,null,null);e["default"]=o.exports},b41e:function(t,e,n){"use strict";n.r(e);var a=n("e943"),i=n("a21c");for(var r in i)"default"!==r&&function(t){n.d(e,t,(function(){return i[t]}))}(r);var s=n("2877"),o=Object(s["a"])(i["default"],a["a"],a["b"],!1,null,null,null);e["default"]=o.exports},b454:function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b-table",{staticClass:"card-table",attrs:{items:t.data,fields:t.fields,"sort-by":t.sortBy,"sort-desc":t.sortDesc,striped:!0,bordered:!0,"current-page":t.currentPage,"per-page":t.perPage,responsive:"","sticky-header":!0},on:{"update:sortBy":function(e){t.sortBy=e},"update:sort-by":function(e){t.sortBy=e},"update:sortDesc":function(e){t.sortDesc=e},"update:sort-desc":function(e){t.sortDesc=e}},scopedSlots:t._u([{key:"description",fn:function(e){return[e.item.description?n("span",[t._v(t._s(e.item.description))]):n("span",[t._v("-")])]}},{key:"user",fn:function(e){return[e.item.user?n("span",[t._v(t._s(e.item.user))]):n("span",[t._v("-")])]}},{key:"status",fn:function(e){return[n("span",[t._v(t._s(t._f("getText")(e.item.status,"status")))])]}},{key:"actions",fn:function(e){return[n("b-btn",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{variant:"default btn-xs md-btn-flat",title:t.actionTitle},on:{click:function(n){return t.showUserEditModal(e.item)}}},[n("i",{staticClass:"ion ion-md-create"}),t._v("\n      "+t._s(t.actionTitle)+"\n    ")])]}}])})},i=[];n.d(e,"a",(function(){return a})),n.d(e,"b",(function(){return i}))},b58f:function(t,e,n){"use strict";n.r(e);var a=n("cc41"),i=n("fe7f");for(var r in i)"default"!==r&&function(t){n.d(e,t,(function(){return i[t]}))}(r);var s=n("2877"),o=Object(s["a"])(i["default"],a["a"],a["b"],!1,null,null,null);e["default"]=o.exports},b775:function(t,e,n){"use strict";n.r(e);var a=n("2b0e"),i=n("bc3a"),r=n.n(i),s=n("4360"),o=n("a18c"),l=n.n(o),c=n("5f87"),u=void 0,d=r.a.create({baseURL:"https://cwd-vote.qidorg.com/api/v1/admin",timeout:5e3});d.interceptors.request.use((function(t){return s["default"].getters.token&&(t.headers["Authorization"]="Bearer ".concat(Object(c["a"])())),t}),(function(t){return console.log(t),Promise.reject(t)})),d.interceptors.response.use((function(t){var e=t.data;return e.code&&0!==e.code?(a["default"].notify({group:"notifications-default",type:"bg-danger text-white",title:"Error",text:e.message}),50008!==e.code&&50012!==e.code&&50014!==e.code||(a["default"].swal({title:"Confirm logout",text:"You have been logged out, you can cancel to stay on this page, or log in again",type:"warning",showCancelButton:!0,confirmButtonText:u.$t("TITLE_CONFIRM"),cancelButtonText:u.$t("TITLE_CANCEL"),confirmButtonColor:"#1cbb84",allowOutsideClick:!1}).then((function(t){t.value&&s["default"].dispatch("user/resetToken").then((function(){location.reload()}))})),s["default"].dispatch("user/resetToken").then((function(){location.reload()}))),Promise.reject(new Error(e.message||"Error"))):e}),(function(t){var e=t.response.status;return 401!==e&&403!==e||l.a.push({path:"/login"}),a["default"].notify({group:"notifications-default",type:"bg-danger text-white",title:"Error",text:t.message}),Promise.reject(t)})),e["default"]=d},b7e9:function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b-check-group",{attrs:{plain:"",options:t.options,state:t.state},model:{value:t.inputVal,callback:function(e){t.inputVal=e},expression:"inputVal"}})},i=[],r={name:"check-group",props:{value:Array,options:Array,state:Boolean},computed:{inputVal:{get:function(){return this.value},set:function(t){this.$emit("onchage",t)}}}},s=r,o=n("2877"),l=Object(o["a"])(s,a,i,!1,null,null,null);e["default"]=l.exports},b8e8:function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("h4",{staticClass:"font-weight-bold py-2 mb-2"},[t._v("评审")]),t._v(" "),n("list-filter",{attrs:{filters:t.listQuery.filters,filterOptions:t.filterOptions},on:{action:t.handleFilter}}),t._v(" "),n("div",{staticClass:"row"},[n("b-btn",{staticClass:"d-block mr-2 ml-3 mb-3",attrs:{variant:"primary rounded-pill"},on:{click:t.showRankModal}},[n("span",{staticClass:"ion ion-md-cellular"}),t._v("  排名表\n    ")]),t._v(" "),n("b-btn",{staticClass:"d-block ml-2 mb-3",attrs:{variant:"info rounded-pill"},on:{click:t.handleDistributionReviewBy}},[t._v("分配评审")])],1),t._v(" "),n("b-card",{attrs:{"no-body":""}},[n("b-card-body",[n("div",{staticClass:"row"},[n("div",{staticClass:"col"},[n("span",{staticStyle:{"font-size":"18px"}},[t._v("当前评选："+t._s(t.currentEvent.title))])]),t._v(" "),n("div",{staticClass:"col"},[n("b-input",{staticClass:"d-inline-block w-auto float-sm-right",attrs:{size:"sm",placeholder:"搜寻..."},on:{input:function(e){return t.filter(e)}}})],1)])]),t._v(" "),n("div",{staticClass:"table-responsive"},[n("ListTable",{attrs:{fields:t.fields,data:t.usersData,currentPage:t.listQuery.currentPage,perPage:t.listQuery.perPage,actionTitle:"打分"},on:{review:t.showReviewModal}})],1),t._v(" "),n("b-card-body",{staticClass:"pt-0 pb-3"},[n("div",{staticClass:"row"},[n("div",{staticClass:"col-sm text-sm-left text-center pt-3"},[t.totalItems?n("span",{staticClass:"text-muted"},[t._v("Page "+t._s(t.listQuery.currentPage)+" of "+t._s(t.totalPages))]):t._e()]),t._v(" "),n("div",{staticClass:"col-sm pt-3"},[t.totalItems?n("b-pagination",{staticClass:"justify-content-center justify-content-sm-end m-0",attrs:{"total-rows":t.totalItems,"per-page":t.listQuery.perPage,size:"sm"},model:{value:t.listQuery.currentPage,callback:function(e){t.$set(t.listQuery,"currentPage",e)},expression:"listQuery.currentPage"}}):t._e()],1)])])],1),t._v(" "),n("form-modal",{ref:"addEvent",attrs:{handleType:t.handleType,options:t.options,userForm:t.userForm},on:{"update:userForm":function(e){t.userForm=e},"update:user-form":function(e){t.userForm=e},save:t.handleOperationUser}}),t._v(" "),n("rank-modal",{ref:"rank",attrs:{currentEvent:t.currentEvent,usersData:t.usersData,listQuery:t.listQuery},on:{"update:usersData":function(e){t.usersData=e},"update:users-data":function(e){t.usersData=e},getList:t.getList}})],1)},i=[];n.d(e,"a",(function(){return a})),n.d(e,"b",(function(){return i}))},b9e5:function(t,e,n){"use strict";var a=n("3bc0"),i=n.n(a);e["default"]=i.a},bd02:function(t,e,n){"use strict";n.r(e);var a=n("bdea"),i=n.n(a);for(var r in a)"default"!==r&&function(t){n.d(e,t,(function(){return a[t]}))}(r);e["default"]=i.a},bdea:function(t,e,n){"use strict";var a=n("4ea4");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,n("ac6a");var i=a(n("cece")),r=a(n("e573")),s=a(n("7292")),o=a(n("b58f")),l=n("ed08"),c=n("96b6"),u=n("ebab"),d=n("c9c6"),f=n("54a5a"),v=n("83d6"),p={name:"Review",components:{ListFilter:i.default,ListTable:r.default,FormModal:s.default,RankModal:o.default},computed:{totalItems:function(){return this.usersData.length},totalPages:function(){return Math.ceil(this.totalItems/this.listQuery.perPage)}},data:function(){return{searchKeys:(0,u.searchKeys)(),handleType:"create",usersData:[],userForm:d.formData,listQuery:(0,u.listQuery)(),filterOptions:(0,f.filterOptions)(),fields:(0,u.fields)(),originalUsersData:[],options:{},currentEvent:{id:null,title:null}}},created:function(){this.getList()},methods:{getList:function(){var t=this;(0,c.getList)(this.listQuery).then((function(e){t.usersData=e.data.items,t.currentEvent=e.data.isSelectEvent,t.originalUsersData=e.data.items.slice(0)})).catch((function(t){console.log(t)}))},handleFilter:function(){this.getList()},showRankModal:function(){this.$refs["rank"].$refs.rankModal.show()},handleDistributionReviewBy:function(){var t=this;this.$swal({title:"是否分配评委",type:"warning",showCancelButton:!0,confirmButtonText:this.$t("TITLE_CONFIRM"),cancelButtonText:this.$t("TITLE_CANCEL"),confirmButtonColor:"#1cbb84",allowOutsideClick:!1}).then((function(e){e.value&&(0,c.distributionReviewBy)().then((function(e){(0,l.notify)(v.successAlert,"Success","当前评选中的 "+e.data.count+" 个作品分配给了评审员"),t.getList()}))}))},showReviewModal:function(t){this.handleType="review",this.userForm=t,this.$refs["addEvent"].$refs["form"].$v&&this.$refs["addEvent"].$refs["form"].$v.$reset(),this.$refs["addEvent"].$refs.userModal.show()},filter:function(t){var e=this,n=t.toLowerCase(),a=this.originalUsersData.filter((function(t){return-1!==Object.keys(t).filter((function(t){return e.searchKeys.includes(t)})).map((function(e){return String(t[e])})).join("|").toLowerCase().indexOf(n)||!n}));this.usersData=a},handleOperationUser:function(){this.handleCreateData()},handleCreateData:function(){var t=this,e=this.userForm.id;(0,c.updateReview)(e,{actualTickets:this.userForm.actualTickets,fraction:this.userForm.fraction,totalFraction:this.userForm.totalFraction,isOverWrite:this.userForm.isOverWrite,actualFraction:this.userForm.actualFraction,rank:this.userForm.rank}).then((function(e){t.getList(),t.$refs["addEvent"].$refs.userModal.hide(),(0,l.notify)(v.successAlert,"Success","保存成功")})).catch((function(t){console.log(t)}))}}};e.default=p},c037:function(t,e,n){"use strict";var a=n("0cbb"),i=n.n(a);i.a},c164:function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b-form-textarea",{attrs:{rows:"6",placeholder:t.placeholder,type:t.type,state:t.state},model:{value:t.inputVal,callback:function(e){t.inputVal=e},expression:"inputVal"}})},i=[],r={name:"form-type",props:{value:String,placeholder:String,type:String,state:Boolean},computed:{inputVal:{get:function(){return this.value},set:function(t){this.$emit("onchage",t)}}}},s=r,o=n("2877"),l=Object(o["a"])(s,a,i,!1,null,null,null);e["default"]=l.exports},c1e8:function(t,e,n){"use strict";var a=n("4ea4");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,n("20d6");var i=a(n("37c7")),r=n("96b6"),s=n("ed08"),o=n("83d6"),l={name:"rank-modal",components:{RackTable:i.default},props:{currentEvent:{type:Object},usersData:{type:Array},listQuery:{type:Object}},filters:{filtersReview:function(t,e){return t.filter((function(t){return t.status===e})).length}},data:function(){return{fields:[{label:"编号",key:"no",sortable:!0,tdClass:"align-middle"},{label:"状态",key:"status",sortable:!0,tdClass:"align-middle"},{label:"实际总分",key:"actualFraction",sortable:!0,tdClass:"align-middle"},{label:"排名",key:"rank",sortable:!0,tdClass:"align-middle"},{label:"评委",key:"user",sortable:!0,tdClass:"align-middle"},{key:"actions",label:" ",tdClass:"text-nowrap align-middle text-center"}]}},methods:{showChangeReviewModal:function(t,e){var n=this,a=this.usersData.findIndex((function(e){return e===t}));if(t["isEdit"]&&e){var i=t.id;(0,r.updateFraction)(i,{actualFraction:t.actualFraction,rank:t.rank}).then((function(t){n.$emit("getList"),(0,s.notify)(o.successAlert,"Success","修改成功")})).catch((function(t){console.log(t)}))}this.usersData[a].isEdit=!t["isEdit"]},handleCalRank:function(){var t=this;(0,r.calRank)().then((function(e){t.$emit("getList")}))},updateFraction:function(t){t.preventDefault(),this.$refs.form.onSubmit()},onSubmit:function(){console.log(this.userForm)},handleDownloadRank:function(){(0,r.downloadRank)({id:this.currentEvent.id}).then((function(t){0===t.code&&window.open(t.data.file)}))}}};e.default=l},c1f0:function(t,e,n){"use strict";n.r(e);var a=n("b8e8"),i=n("bd02");for(var r in i)"default"!==r&&function(t){n.d(e,t,(function(){return i[t]}))}(r);n("8e35");var s=n("2877"),o=Object(s["a"])(i["default"],a["a"],a["b"],!1,null,null,null);e["default"]=o.exports},c24f:function(t,e,n){"use strict";n.d(e,"e",(function(){return i})),n.d(e,"d",(function(){return r})),n.d(e,"c",(function(){return s})),n.d(e,"h",(function(){return o})),n.d(e,"g",(function(){return l})),n.d(e,"f",(function(){return c})),n.d(e,"a",(function(){return u})),n.d(e,"i",(function(){return d})),n.d(e,"b",(function(){return f}));var a=n("b775");function i(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(a["default"])({url:"/user/info",method:"get",params:t})}function r(t){return Object(a["default"])({url:"/user/roles",method:"get",params:t})}function s(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(a["default"])({url:"/profile/info",method:"get",params:t})}function o(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(a["default"])({url:"/profile/update",method:"post",data:t})}function l(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(a["default"])({url:"/profile/change_password",method:"post",data:t})}function c(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(a["default"])({url:"/user/list",method:"get",params:t})}function u(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(a["default"])({url:"/user/create",method:"post",data:t})}function d(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(a["default"])({url:"/user/".concat(t,"/update"),method:"post",data:e})}function f(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(a["default"])({url:"/user/".concat(t,"/delete"),method:"post",data:e})}},c2ac:function(t,e,n){"use strict";n.r(e);var a=n("eae3"),i=n("b09d");for(var r in i)"default"!==r&&function(t){n.d(e,t,(function(){return i[t]}))}(r);var s=n("2877"),o=Object(s["a"])(i["default"],a["a"],a["b"],!1,null,null,null);e["default"]=o.exports},c53c:function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"ui-bordered px-4 pt-4 mb-4"},[n("div",{staticClass:"form-row align-items-center"},[t._l(t.filterOptions,(function(e){return n("div",{key:e.value,staticClass:"col-md-4 mb-4"},[n("label",{staticClass:"form-label"},[t._v(t._s(e.label))]),t._v(" "),n("b-input",{model:{value:t.filters[e.value],callback:function(n){t.$set(t.filters,e.value,n)},expression:"filters[item.value]"}})],1)})),t._v(" "),n("div",{staticClass:"col-md col-xl-2 mb-4"},[n("label",{staticClass:"form-label d-none d-md-block"},[t._v(" ")]),t._v(" "),n("b-btn",{attrs:{variant:"secondary",block:!0},on:{click:function(e){return t.handleSearch()}}},[t._v(t._s(t.$t("TITLE_SEARCH")))])],1)],2)])},i=[],r={name:"user-filter",props:{filters:{type:Object,default:function(){return{username:void 0}}},filterOptions:{type:Array,default:function(){return[]}}},methods:{handleSearch:function(){this.$emit("action",this.filters)}}},s=r,o=n("2877"),l=Object(o["a"])(s,a,i,!1,null,null,null);e["default"]=l.exports},c60c:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.fields=e.searchKeys=e.listQuery=void 0;var a=function(){return{currentPage:1,perPage:20,filters:{title:void 0,author:void 0,worksNo:void 0}}};e.listQuery=a;var i=function(){return["id","title","author","worksNo","status","event","tabs"]};e.searchKeys=i;var r=function(){return[{label:"ID",key:"id",sortable:!0,tdClass:"align-middle"},{label:"作品编号",key:"worksNo",sortable:!0,tdClass:"align-middle"},{label:"作品类型",key:"worksType",sortable:!0,tdClass:"align-middle"},{label:"状态",key:"status",sortable:!0,tdClass:"align-middle"},{label:"名称",key:"title",sortable:!0,tdClass:"align-middle"},{label:"作者",key:"author",sortable:!0,tdClass:"align-middle"},{label:"学校（单位）",key:"organization",sortable:!0,tdClass:"align-middle"},{label:"投票数",key:"tickets",sortable:!0,tdClass:"align-middle"},{label:"投票项",key:"event",sortable:!0,tdClass:"align-middle"},{label:"标签",key:"tabs",sortable:!0,tdClass:"align-middle"},{key:"actions",label:" ",tdClass:"text-nowrap align-middle text-center"}]};e.fields=r},c653:function(t,e,n){var a={"./permission.js":"31c2","./user.js":"0f9a"};function i(t){var e=r(t);return n(e)}function r(t){if(!n.o(a,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return a[t]}i.keys=function(){return Object.keys(a)},i.resolve=r,t.exports=i,i.id="c653"},c9c6:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.formItem=e.formData=void 0;var a=n("30d1"),i={actualTickets:"",fraction:""};e.formData=i;var r=function(t){return{actualTickets:{label:"实际投票数",placeholder:"请填写实际投票数",state:!0,invalid:(0,a.invalid)().invalidActualTickets,component:"Input",type:"number",required:!0},fraction:{label:"打分",placeholder:"请填写打分",state:!0,invalid:(0,a.invalid)().invalidFraction,type:"number",component:"Input",required:!0},totalFraction:{label:"计算总分",type:"number",component:"Input",disabled:!0},isOverWrite:{label:"计算总分覆盖实际分数及重算排名",component:"Switcher",required:!1},actualFraction:{label:"实际分数",placeholder:"请填写实际分数",state:!0,invalid:(0,a.invalid)().invalidActualFraction,type:"number",component:"Input",required:!0},rank:{label:"排名",placeholder:"请填写排名",type:"number",component:"Input",required:!1}}};e.formItem=r},cc41:function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b-modal",{ref:"rankModal",attrs:{"no-close-on-backdrop":!0,"no-close-on-esc":!0,size:"lg",centered:!0,"cancel-title":"取消","ok-title":"确定"}},[n("div",{attrs:{slot:"modal-title"},slot:"modal-title"},[t._v("排名表（已打分："+t._s(t._f("filtersReview")(t.usersData,"done_review"))+"、未打分："+t._s(t._f("filtersReview")(t.usersData,"doing_review"))+"）")]),t._v(" "),n("div",{staticClass:"row"},[n("b-btn",{staticClass:"d-block ml-2 mb-3",attrs:{variant:"info rounded-pill"},on:{click:t.handleCalRank}},[t._v("算出排名（请确保评委已经打完分，再进行排名操作）")]),t._v(" "),n("b-btn",{staticClass:"d-block ml-2 mb-3",attrs:{variant:"info rounded-pill"},on:{click:t.handleDownloadRank}},[t._v("下载排名")]),t._v(" "),n("RackTable",{attrs:{fields:t.fields,data:t.usersData,actionTitle:"改分"},on:{review:t.showChangeReviewModal}})],1)])},i=[];n.d(e,"a",(function(){return a})),n.d(e,"b",(function(){return i}))},cece:function(t,e,n){"use strict";n.r(e);var a=n("4fda"),i=n("2673");for(var r in i)"default"!==r&&function(t){n.d(e,t,(function(){return i[t]}))}(r);var s=n("2877"),o=Object(s["a"])(i["default"],a["a"],a["b"],!1,null,null,null);e["default"]=o.exports},cf05:function(t,e,n){t.exports=n.p+"img/logo.b592d9b9.png"},d152:function(t,e,n){"use strict";var a=n("80b1"),i=n.n(a);i.a},d374b:function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b-modal",{ref:"userModal",attrs:{"no-close-on-backdrop":!0,"no-close-on-esc":!0,size:"lg",centered:!0,"cancel-title":"取消","ok-title":"保存"},on:{ok:t.addUser}},[n("div",{attrs:{slot:"modal-title"},slot:"modal-title"},[t._v(t._s("create"===t.handleType?"新增":"编辑"))]),t._v(" "),n("form-type",{ref:"form",attrs:{formData:t.userForm,handleType:t.handleType,options:t.options},on:{save:t.onSubmit}})],1)},i=[],r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b-form",{on:{submit:function(e){return e.stopPropagation(),e.preventDefault(),t.onSubmit(e)}}},t._l(t.formItem,(function(e,a){return n("form-item",{key:a,attrs:{name:a,item:e,value:t.formData[a],v:t.$v},on:{onchage:t.onChage}})})),1)},s=[],o=(n("7f7f"),n("8fa4")),l=n("7501"),c=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b-form-group",{attrs:{label:t.item.label,"invalid-feedback":this.item.invalid&&this.item.invalid(this)}},[t.item.required?n("div",{attrs:{slot:"label"},slot:"label"},[n("i",{staticClass:"ion ion-ios-medical text-left text-danger"}),t._v("\n    "+t._s(t.item.label)+"\n  ")]):t._e(),t._v(" "),n(t.item.component,{tag:"component",attrs:{placeholder:t.item.placeholder,value:t.value,state:t.item.state&&t.v.formData[t.name].$dirty?!t.v.formData[t.name].$error:null,options:t.item.options,action:t.item.action},on:{onchage:t.onChage}})],1)},u=[],d=(n("c5f6"),n("b7e9")),f=n("c2ac"),v=n("00f4"),p=n("c164"),m=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b-select",{attrs:{placeholder:t.placeholder,type:t.type,state:t.state,options:t.options},model:{value:t.inputVal,callback:function(e){t.inputVal=e},expression:"inputVal"}})},h=[],b={name:"form-type",props:{value:[String,Number],options:Array,placeholder:String,type:String,state:Boolean},computed:{inputVal:{get:function(){return this.value},set:function(t){this.$emit("onchage",t)}}}},g=b,_=n("2877"),y=Object(_["a"])(g,m,h,!1,null,null,null),C=y.exports,w=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("multiselect",{attrs:{options:t.options.map((function(t){return t.value})),multiple:!0,placeholder:t.placeholder,"custom-label":function(e){return t.options.find((function(t){return t.value==e})).text}},model:{value:t.inputVal,callback:function(e){t.inputVal=e},expression:"inputVal"}})},k=[],O=n("8e5f"),E=n.n(O),j={name:"form-type",props:{value:Array,options:Array,placeholder:String,type:String,state:Boolean},components:{Multiselect:E.a},computed:{inputVal:{get:function(){return this.value},set:function(t){this.$emit("onchage",t)}}}},x=j,T=(n("60bc"),n("d152"),Object(_["a"])(x,w,k,!1,null,null,null)),$=T.exports,D=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("quill-editor",{class:t.state?"is-invalid":"is-valid",attrs:{options:t.editorOptions},model:{value:t.inputVal,callback:function(e){t.inputVal=e},expression:"inputVal"}})},P=[],S={name:"form-type",props:{value:String,placeholder:String,type:String,state:Boolean},components:{quillEditor:function(){return n.e("chunk-42aa9ed6").then(n.t.bind(null,"953d",7)).then((function(t){return t.quillEditor})).catch((function(){}))}},computed:{inputVal:{get:function(){return this.value},set:function(t){this.$emit("onchage",t)}}},data:function(){return{editorOptions:{placeholder:this.placeholder,modules:{toolbar:[[{header:[1,2,3,4,5,6,!1]},{font:[]},{size:[]}],["bold","italic","underline","strike"],[{color:[]},{background:[]}],[{script:"sub"},{script:"super"}],["blockquote","code-block"],[{list:"ordered"},{list:"bullet"},{indent:"-1"},{indent:"+1"}],[{direction:"rtl"},{align:[]}],["link"],["clean"]]}}}}},L=S,I=(n("6821d"),n("c037"),n("5aa5"),Object(_["a"])(L,D,P,!1,null,null,null)),F=I.exports,M=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{style:t.styles},[n("div",{staticStyle:{"padding-bottom":"8px"}},t._l(t.inputVal,(function(e,a){return n("div",{key:a},[100==Number(e.progress)?[n("a",{attrs:{href:JSON.parse(e.response).data.url,target:"_blank"}},[t._v("查看文件")]),t._v(" "),n("i",{staticClass:"fa fa-minus-square pl-2 text-danger",on:{click:function(n){return n.preventDefault(),t.$refs.upload.remove(e)}}})]:[n("b-progress",{attrs:{value:Number(e.progress),height:"0.75rem"}})]],2)})),0),t._v(" "),n("file-upload",{ref:"upload",class:t.componentClass,attrs:{"post-action":t.action,extensions:t.extensions,accept:t.accept,size:t.size,multiple:!0},on:{"input-filter":t.inputFilter,"input-file":t.inputFile},model:{value:t.inputVal,callback:function(e){t.inputVal=e},expression:"inputVal"}},[n("i",{staticClass:"fa fa-plus"}),t._v(" "),0==t.inputVal.length?n("span",[t._v("选择文件")]):n("span",[t._v("添加文件")])]),t._v(" "),n("div",{staticClass:"tips"},[t._v("支持上传文件："+t._s(t.accept))])],1)},B=[],A=n("8019"),R=n.n(A),N={name:"upload-images",props:{styles:String,accept:{type:String,default:"image/png, image/gif, image/jpeg, image/webp"},extensions:{type:String,default:"gif,jpg,jpeg,png,webp"},size:{type:Number,default:10485760},componentClass:{type:String,default:"btn btn-primary"},action:{type:String,required:!0},value:{type:Array,required:!0}},components:{FileUpload:R.a},computed:{inputVal:{get:function(){return this.value},set:function(t){this.$emit("onchage",t)}}},data:function(){return{}},methods:{inputFilter:function(t,e,n){if(t&&!e){if(/(\/|^)(Thumbs\.db|desktop\.ini|\..+)$/.test(t.name))return n();if(/\.(php5?|html?|jsx?)$/i.test(t.name))return n()}},inputFile:function(t,e){t&&!e&&console.log("add",t),t&&e&&console.log("update",t),!t&&e&&console.log("remove",e),Boolean(t)===Boolean(e)&&e.error===t.error||this.$refs.upload.active||(this.$refs.upload.active=!0)}}},U=N,q=(n("7eae"),Object(_["a"])(U,M,B,!1,null,null,null)),z=q.exports,Q={name:"form-item",components:{CheckGroup:d["default"],Input:f["default"],Switcher:v["default"],Textarea:p["default"],Select:C,MultiSelect:$,Editor:F,UploadImages:z},props:{name:String,value:[Number,String,Boolean,Array],item:Object,v:Object},methods:{onChage:function(t){this.$emit("onchage",{name:this.name,val:t})}}},H=Q,V=Object(_["a"])(H,c,u,!1,null,null,null),W=V.exports,K={name:"form-type",data:function(){return{formItem:Object(l["formItem"])(this.options)}},watch:{options:{handler:function(t,e){this.formItem=Object(l["formItem"])(t)},deep:!0}},components:{FormItem:W},props:{formData:{type:Object},handleType:{type:String},options:{type:Object}},validations:Object(o["validator"])(),methods:{onChage:function(t){this.formData[t.name]=t.val},onSubmit:function(){var t=this;this.$v.formData.$touch(),this.$v.formData.$anyError||this.$nextTick((function(){t.$emit("save")}))}}},G=K,Y=Object(_["a"])(G,r,s,!1,null,null,null),J=Y.exports,X={name:"form-modal",components:{FormType:J},props:{handleType:{type:String},userForm:{type:Object},options:{type:Object}},methods:{addUser:function(t){t.preventDefault(),this.$refs.form.onSubmit()},onSubmit:function(){var t=this;this.$nextTick((function(){t.$emit("save")}))}}},Z=X,tt=Object(_["a"])(Z,a,i,!1,null,null,null);e["default"]=tt.exports},da08:function(t,e,n){"use strict";var a=n("4ea4");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=a(n("45c8")),r={name:"form-modal",components:{FormType:i.default},props:{handleType:{type:String},userForm:{type:Object},options:{type:Object}},methods:{addUser:function(t){t.preventDefault(),this.$refs.form.onSubmit()},onSubmit:function(){var t=this;this.$nextTick((function(){t.$emit("save")}))}}};e.default=r},db78:function(t,e,n){},dbc7:function(t,e,n){"use strict";var a=n("a86d"),i=n.n(a);i.a},dea6:function(t,e,n){"use strict";n.r(e),n.d(e,"getTabItems",(function(){return i})),n.d(e,"getTabList",(function(){return r})),n.d(e,"createTab",(function(){return s})),n.d(e,"updateTab",(function(){return o})),n.d(e,"deleteTab",(function(){return l}));var a=n("b775");function i(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(a["default"])({url:"/tab/items",method:"get",params:t})}function r(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(a["default"])({url:"/tab/list",method:"get",params:t})}function s(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(a["default"])({url:"/tab/create",method:"post",data:t})}function o(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(a["default"])({url:"/tab/".concat(t,"/update"),method:"post",data:e})}function l(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(a["default"])({url:"/tab/".concat(t,"/delete"),method:"post",data:e})}},e0da:function(t,e,n){},e318:function(t,e,n){},e382:function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("h4",{staticClass:"font-weight-bold py-2 mb-2"},[t._v(t._s(t.$t("TITLE_USER_MANAGER")))]),t._v(" "),n("list-filter",{attrs:{filters:t.listQuery.filters,filterOptions:t.filterOptions},on:{action:t.handleFilter}}),t._v(" "),n("b-btn",{staticClass:"d-block mb-3",attrs:{variant:"primary rounded-pill"},on:{click:t.showUserCreateModal}},[n("span",{staticClass:"ion ion-md-add"}),t._v("  新增\n  ")]),t._v(" "),n("b-card",{attrs:{"no-body":""}},[n("b-card-body",[n("div",{staticClass:"row"},[n("div",{staticClass:"col"},[n("b-input",{staticClass:"d-inline-block w-auto float-sm-right",attrs:{size:"sm",placeholder:"搜寻..."},on:{input:function(e){return t.filter(e)}}})],1)])]),t._v(" "),n("div",{staticClass:"table-responsive"},[n("ListTable",{attrs:{fields:t.fields,data:t.usersData,currentPage:t.listQuery.currentPage,perPage:t.listQuery.perPage},on:{edit:t.showUserEditModal,del:t.handleDel}})],1),t._v(" "),n("b-card-body",{staticClass:"pt-0 pb-3"},[n("div",{staticClass:"row"},[n("div",{staticClass:"col-sm text-sm-left text-center pt-3"},[t.totalItems?n("span",{staticClass:"text-muted"},[t._v("Page "+t._s(t.listQuery.currentPage)+" of "+t._s(t.totalPages))]):t._e()]),t._v(" "),n("div",{staticClass:"col-sm pt-3"},[t.totalItems?n("b-pagination",{staticClass:"justify-content-center justify-content-sm-end m-0",attrs:{"total-rows":t.totalItems,"per-page":t.listQuery.perPage,size:"sm"},model:{value:t.listQuery.currentPage,callback:function(e){t.$set(t.listQuery,"currentPage",e)},expression:"listQuery.currentPage"}}):t._e()],1)])])],1),t._v(" "),n("form-modal",{ref:"addEvent",attrs:{handleType:t.handleType,options:t.options,userForm:t.userForm},on:{"update:userForm":function(e){t.userForm=e},"update:user-form":function(e){t.userForm=e},save:t.handleOperationUser}})],1)},i=[],r=(n("ac6a"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"ui-bordered px-4 pt-4 mb-4"},[n("div",{staticClass:"form-row align-items-center"},[t._l(t.filterOptions,(function(e){return n("div",{key:e.value,staticClass:"col-md-4 mb-4"},[n("label",{staticClass:"form-label"},[t._v(t._s(e.label))]),t._v(" "),n("b-input",{model:{value:t.filters[e.value],callback:function(n){t.$set(t.filters,e.value,n)},expression:"filters[item.value]"}})],1)})),t._v(" "),n("div",{staticClass:"col-md col-xl-2 mb-4"},[n("label",{staticClass:"form-label d-none d-md-block"},[t._v(" ")]),t._v(" "),n("b-btn",{attrs:{variant:"secondary",block:!0},on:{click:function(e){return t.handleSearch()}}},[t._v(t._s(t.$t("TITLE_SEARCH")))])],1)],2)])}),s=[],o={name:"user-filter",props:{filters:{type:Object,default:function(){return{username:void 0}}},filterOptions:{type:Array,default:function(){return[]}}},methods:{handleSearch:function(){this.$emit("action",this.filters)}}},l=o,c=n("2877"),u=Object(c["a"])(l,r,s,!1,null,null,null),d=u.exports,f=n("96fd"),v=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b-modal",{ref:"userModal",attrs:{"no-close-on-backdrop":!0,"no-close-on-esc":!0,size:"Large",centered:!0,"cancel-title":"取消","ok-title":"保存"},on:{ok:t.addUser}},[n("div",{attrs:{slot:"modal-title"},slot:"modal-title"},[t._v(t._s("create"===t.handleType?"新增":"编辑"))]),t._v(" "),n("form-type",{ref:"form",attrs:{formData:t.userForm,handleType:t.handleType,options:t.options},on:{save:t.onSubmit}})],1)},p=[],m=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b-form",{on:{submit:function(e){return e.stopPropagation(),e.preventDefault(),t.onSubmit(e)}}},t._l(t.formItem,(function(e,a){return n("form-item",{key:a,attrs:{name:a,item:e,value:t.formData[a],v:t.$v},on:{onchage:t.onChage}})})),1)},h=[],b=(n("7f7f"),n("b5ae")),g=function(){return{formData:{username:{required:b["required"]},name:{required:b["required"]},password:{required:Object(b["requiredIf"])((function(){return this.handleType&&"create"===this.handleType})),minLength:Object(b["minLength"])(8)},email:{email:b["email"]},confirmPassword:{required:Object(b["requiredIf"])((function(){return this.formData.password})),sameAsPassword:Object(b["sameAs"])("password")}}}},_=function(){return{invalidUsername:function(t){if(!t.v.formData.username.required)return t.$t("TITLE_REQUIRED")},invalidName:function(t){if(!t.v.formData.username.required)return t.$t("TITLE_REQUIRED")},invalidNewPassword:function(t){return t.v.formData.password.required?t.v.formData.password.minLength?void 0:"密码至少大于8位":t.$t("TITLE_REQUIRED")},invalidRepeatPassword:function(t){return t.v.formData.confirmPassword.required?t.v.formData.confirmPassword.sameAsPassword?void 0:"密码必须相同":t.$t("TITLE_REQUIRED")},invalidEmail:function(t){if(!t.v.formData.email.email)return"邮箱地址无效"}}},y={enabled:!0,isSuperAdmin:!0,name:"",username:"",email:"",password:"",confirmPassword:"",roles:[]},C=function(t){var e=JSON.parse(JSON.stringify(t));return console.log(e),{enabled:{label:"启用",component:"Switcher",required:!1},isSuperAdmin:{label:"超级管理员",component:"Switcher",required:!1},username:{label:"用户名",placeholder:"请填写用户名",state:!0,invalid:_().invalidUsername,component:"Input",required:!0},name:{label:"姓名",placeholder:"请填写姓名",component:"Input",state:!0,invalid:_().invalidUsername,required:!0},email:{label:"电邮",placeholder:"请填写电邮",state:!0,invalid:_().invalidEmail,component:"Input",required:!1},password:{label:"密码",placeholder:"请填写密码",state:!0,invalid:_().invalidNewPassword,component:"Input",required:!1,type:"password"},confirmPassword:{label:"确认密码",placeholder:"请填写确认密码",state:!0,invalid:_().invalidRepeatPassword,component:"Input",required:!1,type:"password"},roles:{label:"权限",options:[{text:"管理员",value:"ROLE_ADMIN"},{text:"评审",value:"ROLE_REVIEW"}],component:"CheckGroup",required:!1}}},w=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b-form-group",{attrs:{label:t.item.label,"invalid-feedback":this.item.invalid&&this.item.invalid(this)}},[t.item.required?n("div",{attrs:{slot:"label"},slot:"label"},[n("i",{staticClass:"ion ion-ios-medical text-left text-danger"}),t._v("\n    "+t._s(t.item.label)+"\n  ")]):t._e(),t._v(" "),n(t.item.component,{tag:"component",attrs:{placeholder:t.item.placeholder,value:t.value,type:t.item.type,state:t.item.state&&t.v.formData[t.name].$dirty?!t.v.formData[t.name].$error:null,options:t.item.options},on:{onchage:t.onChage}})],1)},k=[],O=(n("c5f6"),n("b7e9")),E=n("c2ac"),j=n("00f4"),x={name:"form-item",components:{CheckGroup:O["default"],Input:E["default"],Switcher:j["default"]},props:{name:String,value:[Number,String,Boolean,Array],item:Object,v:Object},methods:{onChage:function(t){this.$emit("onchage",{name:this.name,val:t})}}},T=x,$=Object(c["a"])(T,w,k,!1,null,null,null),D=$.exports,P={name:"form-type",data:function(){return{formItem:C(this.options)}},components:{FormItem:D},props:{formData:{type:Object},handleType:{type:String},options:{type:Object}},validations:g(),methods:{onChage:function(t){this.formData[t.name]=t.val},onSubmit:function(){var t=this;this.$v.formData.$touch(),this.$v.formData.$anyError||this.$nextTick((function(){t.$emit("save")}))}}},S=P,L=Object(c["a"])(S,m,h,!1,null,null,null),I=L.exports,F={name:"form-modal",components:{FormType:I},props:{handleType:{type:String},userForm:{type:Object},options:{type:Object}},methods:{addUser:function(t){t.preventDefault(),this.$refs.form.onSubmit()},onSubmit:function(){var t=this;this.$nextTick((function(){t.$emit("save")}))}}},M=F,B=Object(c["a"])(M,v,p,!1,null,null,null),A=B.exports,R=n("ed08"),N=n("c24f"),U=function(){return{currentPage:1,perPage:20,filters:{username:void 0}}},q=function(){return["id","username","email","name"]},z=function(){return[{label:"ID",key:"id",sortable:!0,tdClass:"align-middle"},{label:"啟用",key:"enabled",sortable:!0,tdClass:"align-middle"},{label:"賬戶",key:"username",sortable:!0,tdClass:"align-middle"},{label:"姓名",key:"name",sortable:!0,tdClass:"align-middle"},{label:"電郵",key:"email",sortable:!0,tdClass:"align-middle"},{label:"最後登錄",key:"lastLogin",sortable:!0,tdClass:"align-middle",thStyle:{minWidth:"110px"}},{key:"actions",label:" ",tdClass:"text-nowrap align-middle text-center"}]},Q=function(){return[{label:"用户名",value:"username",type:"input"}]},H=n("83d6"),V={name:"User",components:{ListFilter:d,ListTable:f["default"],FormModal:A},computed:{totalItems:function(){return this.usersData.length},totalPages:function(){return Math.ceil(this.totalItems/this.listQuery.perPage)}},data:function(){return{searchKeys:q(),handleType:"create",usersData:[],userForm:y,listQuery:U(),filterOptions:Q(),fields:z(),originalUsersData:[],options:{roles:[]}}},created:function(){this.getList()},methods:{getList:function(){var t=this;Object(N["f"])(this.listQuery).then((function(e){t.usersData=e.data.items,t.originalUsersData=e.data.items.slice(0)})).catch((function(t){console.log(t)})),Object(N["d"])().then((function(e){t.options["roles"]=e.data}))},handleFilter:function(){this.getList()},showUserCreateModal:function(){this.userForm=y,this.handleType="create",this.$refs["addEvent"].$refs["form"].$v&&this.$refs["addEvent"].$refs["form"].$v.$reset(),this.$refs["addEvent"].$refs.userModal.show()},showUserEditModal:function(t){this.handleType="edit",this.userForm=t,this.$refs["addEvent"].$refs["form"].$v&&this.$refs["addEvent"].$refs["form"].$v.$reset(),this.$refs["addEvent"].$refs.userModal.show()},filter:function(t){var e=this,n=t.toLowerCase(),a=this.originalUsersData.filter((function(t){return-1!==Object.keys(t).filter((function(t){return e.searchKeys.includes(t)})).map((function(e){return String(t[e])})).join("|").toLowerCase().indexOf(n)||!n}));this.usersData=a},handleOperationUser:function(){"create"===this.handleType?this.handleCreateData():this.handleUpdateData()},handleCreateData:function(){var t=this;Object(N["a"])(this.userForm).then((function(e){t.usersData.unshift(e.data),t.$refs["addEvent"].$refs.userModal.hide(),Object(R["notify"])(H.successAlert,"Success","创建成功")})).catch((function(t){console.log(t)}))},handleUpdateData:function(){var t=this,e=this.userForm.id;Object(N["i"])(e,this.userForm).then((function(e){t.userForm=e.data,t.getList(),t.$refs["addEvent"].$refs.userModal.hide(),Object(R["notify"])(H.successAlert,"Success","更新成功")})).catch((function(t){console.log(t)}))},handleDel:function(t){var e=this;Object(N["b"])(t.id,t).then((function(t){Object(R["notify"])(H.successAlert,"Success","删除成功"),e.getList()})).catch((function(t){console.log(t)}))}}},W=V,K=(n("8e35"),Object(c["a"])(W,a,i,!1,null,null,null));e["default"]=K.exports},e4c3:function(t,e,n){"use strict";var a=n("4ea4");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,n("ac6a");var i=a(n("2b0e")),r=a(n("1fca")),s=n("5fd4");i.default.component("dashboard-chart1",{extends:r.default.Line,mounted:function(){this.renderChart({labels:["2017-03","2017-04","2017-05","2017-06","2017-07","2017-08","2017-09","2017-10","2017-11","2017-12","2018-01","2018-02"],datasets:[{label:"PV",data:[14,37,30,46,80,42,33,13,25,6,88,96],borderWidth:1,backgroundColor:"rgba(38, 180, 255, 0.1)",borderColor:"#26B4FF",fill:!1},{label:"IP",data:[56,17,19,96,73,46,67,40,77,43,64,54],borderWidth:1,borderDash:[5,5],backgroundColor:"rgba(136, 151, 170, 0.1)",borderColor:"#8897aa"}]},{scales:{xAxes:[{gridLines:{display:!1},ticks:{fontColor:"#aaa",autoSkipPadding:50}}],yAxes:[{gridLines:{display:!1},ticks:{fontColor:"#aaa",maxTicksLimit:5}}]},responsive:!1,maintainAspectRatio:!1})}}),i.default.component("dashboard-chart2",{extends:r.default.Pie,mounted:function(){this.renderChart({labels:["主頁","作品","后台"],datasets:[{data:[1225,654,211],backgroundColor:["rgba(99,125,138,0.5)","rgba(28,151,244,0.5)","rgba(2,188,119,0.5)"],borderColor:["#647c8a","#2196f3","#02bc77"],borderWidth:1}]},{scales:{xAxes:[{display:!1}],yAxes:[{display:!1}]},legend:{position:"right",labels:{boxWidth:12}},responsive:!1,maintainAspectRatio:!1})}});var o={name:"dashboard",metaInfo:{title:"首页"},data:function(){return{now:"Today is Tuesday, 8 February 2018",dashboardInfo:{statistics:{}},displayRange:12}},created:function(){this.getDashboard()},mounted:function(){var t=this.$children.filter((function(t){return/-chart\d+$/.test(t.$options._componentTag)})),e=function(){return t.forEach((function(t){return t._data._chart.resize()}))};e(),this.layoutHelpers.on("resize.dashboard",e)},beforeDestroy:function(){this.layoutHelpers.off("resize.dashboard")},methods:{getDashboard:function(){var t=this;return new Promise((function(e,n){(0,s.getDashboardInfo)().then((function(n){t.dashboardInfo=n.data,e(!0)})).catch((function(t){console.log(t),n(t)}))}))}}};e.default=o},e573:function(t,e,n){"use strict";n.r(e);var a=n("b454"),i=n("54a5");for(var r in i)"default"!==r&&function(t){n.d(e,t,(function(){return i[t]}))}(r);var s=n("2877"),o=Object(s["a"])(i["default"],a["a"],a["b"],!1,null,null,null);e["default"]=o.exports},e5b2:function(t,e,n){"use strict";var a=n("1287"),i=n.n(a);i.a},e943:function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b-form-group",{attrs:{label:t.item.label,"invalid-feedback":this.item.invalid&&this.item.invalid(this)}},[t.item.required?n("div",{attrs:{slot:"label"},slot:"label"},[n("i",{staticClass:"ion ion-ios-medical text-left text-danger"}),t._v("\n    "+t._s(t.item.label)+"\n  ")]):t._e(),t._v(" "),n(t.item.component,{tag:"component",attrs:{placeholder:t.item.placeholder,type:t.item.type,value:t.value,state:t.item.state&&t.v.formData[t.name].$dirty?!t.v.formData[t.name].$error:null,options:t.item.options,disabled:t.item.disabled},on:{onchage:t.onChage}})],1)},i=[];n.d(e,"a",(function(){return a})),n.d(e,"b",(function(){return i}))},e9e0:function(t,e,n){"use strict";n.r(e);var a=n("5e1b"),i=n.n(a);for(var r in a)"default"!==r&&function(t){n.d(e,t,(function(){return a[t]}))}(r);e["default"]=i.a},eae3:function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b-input",{attrs:{placeholder:t.placeholder,type:t.type,state:t.state,disabled:t.disabled},model:{value:t.inputVal,callback:function(e){t.inputVal=e},expression:"inputVal"}})},i=[];n.d(e,"a",(function(){return a})),n.d(e,"b",(function(){return i}))},eb51:function(t,e,n){"use strict";n.r(e);var a=n("11b9"),i=n.n(a);for(var r in a)"default"!==r&&function(t){n.d(e,t,(function(){return a[t]}))}(r);e["default"]=i.a},ebab:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.fields=e.searchKeys=e.listQuery=void 0;var a=function(){return{currentPage:1,perPage:20,filters:{title:void 0,worksNo:void 0}}};e.listQuery=a;var i=function(){return["id","title"]};e.searchKeys=i;var r=function(){return[{label:"编号",key:"no",sortable:!0,tdClass:"align-middle"},{label:"名称",key:"title",sortable:!0,tdClass:"align-middle"},{label:"状态",key:"status",sortable:!0,tdClass:"align-middle"},{label:"实际投票数",key:"actualTickets",sortable:!0,tdClass:"align-middle"},{label:"打分",key:"fraction",sortable:!0,tdClass:"align-middle"},{label:"计算总分",key:"totalFraction",sortable:!0,tdClass:"align-middle"},{label:"实际总分",key:"actualFraction",sortable:!0,tdClass:"align-middle"},{label:"排名",key:"rank",sortable:!0,tdClass:"align-middle"},{label:"评委",key:"user",sortable:!0,tdClass:"align-middle"},{label:"更新时间",key:"updatedAt",sortable:!0,tdClass:"align-middle"},{key:"actions",label:" ",tdClass:"text-nowrap align-middle text-center"}]};e.fields=r},ed08:function(t,e,n){"use strict";n.r(e),n.d(e,"param2Obj",(function(){return l})),n.d(e,"getPageTitle",(function(){return c})),n.d(e,"notify",(function(){return u})),n.d(e,"generatorFaker",(function(){return d}));n("6b54"),n("ac6a"),n("5df3"),n("1c4c"),n("a481"),n("28a5");var a=n("69d9"),i=n("2b0e"),r=n("f2a8"),s=n("359c"),o=n.n(s);function l(t){var e=t.split("?")[1];return e?JSON.parse('{"'+decodeURIComponent(e).replace(/"/g,'\\"').replace(/&/g,'","').replace(/=/g,'":"').replace(/\+/g," ")+'"}'):{}}function c(t){var e=Object(r["a"])().websiteTitle;return t?"".concat(a["a"].t(t)," - ").concat(a["a"].t(e)):"".concat(a["a"].t(t))}function u(t,e,n){i["default"].notify({group:"notifications-default",type:t,title:e,text:n||""})}function d(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2?arguments[2]:void 0;return n=n||e,Array.from({length:o.a.random.number({min:e,max:n})}).map((function(){var e=function t(e){return Object.keys(e).reduce((function(n,a){return"[object Object]"===Object.prototype.toString.call(e[a])?(n[a]=t(e[a]),n):(""===e[a]?n[a]="":e[a]instanceof Array?n[a]=[]:(n[a]=o.a.fake(e[a]),"true"===n[a]?n[a]=!0:"false"===n[a]&&(n[a]=!1)),n)}),{})};return e(t)}))}},f061:function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("h4",{staticClass:"font-weight-bold py-2 mb-2"},[t._v("投票管理")]),t._v(" "),n("list-filter",{attrs:{filters:t.listQuery.filters,filterOptions:t.filterOptions},on:{action:t.handleFilter}}),t._v(" "),n("b-btn",{staticClass:"d-block mb-3",attrs:{variant:"primary rounded-pill"},on:{click:t.showUserCreateModal}},[n("span",{staticClass:"ion ion-md-add"}),t._v("  新增\n  ")]),t._v(" "),n("b-card",{attrs:{"no-body":""}},[n("b-card-body",[n("div",{staticClass:"row"},[n("div",{staticClass:"col"},[n("b-input",{staticClass:"d-inline-block w-auto float-sm-right",attrs:{size:"sm",placeholder:"搜寻..."},on:{input:function(e){return t.filter(e)}}})],1)])]),t._v(" "),n("div",{staticClass:"table-responsive"},[n("ListTable",{attrs:{fields:t.fields,data:t.usersData,currentPage:t.listQuery.currentPage,perPage:t.listQuery.perPage},on:{edit:t.showUserEditModal,del:t.handleDel}})],1),t._v(" "),n("b-card-body",{staticClass:"pt-0 pb-3"},[n("div",{staticClass:"row"},[n("div",{staticClass:"col-sm text-sm-left text-center pt-3"},[t.totalItems?n("span",{staticClass:"text-muted"},[t._v("Page "+t._s(t.listQuery.currentPage)+" of "+t._s(t.totalPages))]):t._e()]),t._v(" "),n("div",{staticClass:"col-sm pt-3"},[t.totalItems?n("b-pagination",{staticClass:"justify-content-center justify-content-sm-end m-0",attrs:{"total-rows":t.totalItems,"per-page":t.listQuery.perPage,size:"sm"},model:{value:t.listQuery.currentPage,callback:function(e){t.$set(t.listQuery,"currentPage",e)},expression:"listQuery.currentPage"}}):t._e()],1)])])],1),t._v(" "),n("form-modal",{ref:"addEvent",attrs:{handleType:t.handleType,options:t.options,userForm:t.userForm},on:{"update:userForm":function(e){t.userForm=e},"update:user-form":function(e){t.userForm=e},save:t.handleOperationUser}})],1)},i=[],r=(n("ac6a"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"ui-bordered px-4 pt-4 mb-4"},[n("div",{staticClass:"form-row align-items-center"},[t._l(t.filterOptions,(function(e){return n("div",{key:e.value,staticClass:"col-md-4 mb-4"},[n("label",{staticClass:"form-label"},[t._v(t._s(e.label))]),t._v(" "),n("b-input",{model:{value:t.filters[e.value],callback:function(n){t.$set(t.filters,e.value,n)},expression:"filters[item.value]"}})],1)})),t._v(" "),n("div",{staticClass:"col-md col-xl-2 mb-4"},[n("label",{staticClass:"form-label d-none d-md-block"},[t._v(" ")]),t._v(" "),n("b-btn",{attrs:{variant:"secondary",block:!0},on:{click:function(e){return t.handleSearch()}}},[t._v(t._s(t.$t("TITLE_SEARCH")))])],1)],2)])}),s=[],o={name:"user-filter",props:{filters:{type:Object,default:function(){return{username:void 0}}},filterOptions:{type:Array,default:function(){return[]}}},methods:{handleSearch:function(){this.$emit("action",this.filters)}}},l=o,c=n("2877"),u=Object(c["a"])(l,r,s,!1,null,null,null),d=u.exports,f=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b-table",{staticClass:"card-table",attrs:{items:t.data,fields:t.fields,"sort-by":t.sortBy,"sort-desc":t.sortDesc,striped:!0,bordered:!0,"current-page":t.currentPage,"per-page":t.perPage,responsive:""},on:{"update:sortBy":function(e){t.sortBy=e},"update:sort-by":function(e){t.sortBy=e},"update:sortDesc":function(e){t.sortDesc=e},"update:sort-desc":function(e){t.sortDesc=e}},scopedSlots:t._u([{key:"isActive",fn:function(e){return[!0===e.item.isActive?n("b-badge",{attrs:{variant:"outline-success"}},[t._v("启用")]):t._e(),t._v(" "),!1===e.item.isActive?n("b-badge",{attrs:{variant:"outline-danger"}},[t._v("关闭")]):t._e()]}},{key:"isSelect",fn:function(e){return[!0===e.item.isSelect?n("b-badge",{attrs:{variant:"outline-success"}},[t._v("当前评选")]):n("span",[t._v("-")])]}},{key:"publishDate",fn:function(e){return[e.item.publishDate?n("span",[t._v(t._s(e.item.publishDate))]):n("span",[t._v("-")])]}},{key:"lastLogin",fn:function(e){return[e.item.lastLogin?n("span",[t._v(t._s(e.item.lastLogin))]):n("span",[t._v("-")])]}},{key:"actions",fn:function(e){return[n("b-btn",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{variant:"default btn-xs icon-btn md-btn-flat",title:"編輯"},on:{click:function(n){return t.showUserEditModal(e.item)}}},[n("i",{staticClass:"ion ion-md-create"})]),t._v(" "),n("b-dropdown",{attrs:{variant:"default btn-xs icon-btn md-btn-flat hide-arrow",right:!t.isRTL}},[n("template",{slot:"button-content"},[n("i",{staticClass:"ion ion-ios-settings"})]),t._v(" "),n("b-dropdown-item",{attrs:{href:"javascript:void(0)"},on:{click:function(n){return t.del(e.item)}}},[t._v("关闭")])],2)]}}])})},v=[],p=(n("c5f6"),{name:"user-table",data:function(){return{sortBy:"id",sortDesc:!1}},props:{fields:{type:Array},data:{type:Array},currentPage:{type:Number},perPage:{type:Number}},methods:{showUserEditModal:function(t){this.$emit("edit",t)},del:function(t){var e=this;this.$swal({title:"是否关闭",type:"warning",showCancelButton:!0,confirmButtonText:this.$t("TITLE_CONFIRM"),cancelButtonText:this.$t("TITLE_CANCEL"),confirmButtonColor:"#1cbb84",allowOutsideClick:!1}).then((function(n){n.value&&e.$emit("del",t)}))}}}),m=p,h=Object(c["a"])(m,f,v,!1,null,null,null),b=h.exports,g=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b-modal",{ref:"userModal",attrs:{"no-close-on-backdrop":!0,"no-close-on-esc":!0,size:"Large",centered:!0,"cancel-title":"取消","ok-title":"保存"},on:{ok:t.addUser}},[n("div",{attrs:{slot:"modal-title"},slot:"modal-title"},[t._v(t._s("create"===t.handleType?"新增":"编辑"))]),t._v(" "),n("form-type",{ref:"form",attrs:{formData:t.userForm,handleType:t.handleType,options:t.options},on:{save:t.onSubmit}})],1)},_=[],y=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b-form",{on:{submit:function(e){return e.stopPropagation(),e.preventDefault(),t.onSubmit(e)}}},t._l(t.formItem,(function(e,a){return n("form-item",{key:a,attrs:{name:a,item:e,value:t.formData[a],v:t.$v},on:{onchage:t.onChage}})})),1)},C=[],w=(n("7f7f"),n("b5ae")),k=function(){return{formData:{title:{required:w["required"]},startDate:{required:w["required"]}}}},O=function(){return{invalidTitle:function(t){if(!t.v.formData.title.required)return t.$t("TITLE_REQUIRED")},invalidStartDate:function(t){if(!t.v.formData.startDate.required)return t.$t("TITLE_REQUIRED")}}},E={isActive:!0,title:"",description:null,startDate:null,endDate:null,publishDate:null,isSelect:!0},j=function(t){return{isActive:{label:"启用",component:"Switcher",required:!1},title:{label:"名称",placeholder:"请填写名称",state:!0,invalid:O().invalidTitle,component:"Input",required:!0},description:{label:"说明",placeholder:"请填写说明",component:"Textarea",state:!1},startDate:{label:"投票开始时间",component:"DatePicker",invalid:O().invalidStartDate,state:!0,required:!0},endDate:{label:"投票结束时间",component:"DatePicker",state:!1,required:!1},publishDate:{label:"发布日期",component:"DatePicker",state:!1,required:!1},isSelect:{label:"当前评选",component:"Switcher",required:!1}}},x=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b-form-group",{attrs:{label:t.item.label,"invalid-feedback":this.item.invalid&&this.item.invalid(this)}},[t.item.required?n("div",{attrs:{slot:"label"},slot:"label"},[n("i",{staticClass:"ion ion-ios-medical text-left text-danger"}),t._v("\n    "+t._s(t.item.label)+"\n  ")]):t._e(),t._v(" "),n(t.item.component,{tag:"component",attrs:{placeholder:t.item.placeholder,value:t.value,state:t.item.state&&t.v.formData[t.name].$dirty?!t.v.formData[t.name].$error:null,options:t.item.options},on:{onchage:t.onChage}})],1)},T=[],$=n("b7e9"),D=n("c2ac"),P=n("00f4"),S=n("c164"),L=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("datepicker",{attrs:{bootstrapStyling:!0,required:t.state,"input-class":!1===t.state?"is-invalid":"","wrapper-class":!1===t.state?"error":"",format:t.customFormatter,language:t.zh,"clear-button":"","clear-button-icon":"fa fa-times"},model:{value:t.inputVal,callback:function(e){t.inputVal=e},expression:"inputVal"}})},I=[],F=n("fa33"),M=n("2430"),B=n("c1df"),A=n.n(B),R={name:"form-type",components:{Datepicker:F["a"]},props:{value:[String,Date],type:String,state:Boolean},computed:{inputVal:{get:function(){return this.value},set:function(t){this.$emit("onchage",A()(t).format("YYYY-MM-DD"))}}},data:function(){return{zh:M["a"]}},methods:{customFormatter:function(t){return A()(t).format("YYYY-MM-DD")}}},N=R,U=(n("8ffe"),Object(c["a"])(N,L,I,!1,null,null,null)),q=U.exports,z={name:"form-item",components:{CheckGroup:$["default"],Input:D["default"],Switcher:P["default"],Textarea:S["default"],DatePicker:q},props:{name:String,value:[Number,String,Boolean,Array,Date],item:Object,v:Object},methods:{onChage:function(t){this.$emit("onchage",{name:this.name,val:t})}}},Q=z,H=Object(c["a"])(Q,x,T,!1,null,null,null),V=H.exports,W={name:"form-type",data:function(){return{formItem:j(this.options)}},components:{FormItem:V},props:{formData:{type:Object},handleType:{type:String},options:{type:Object}},validations:k(),methods:{onChage:function(t){this.formData[t.name]=t.val},onSubmit:function(){var t=this;this.$v.formData.$touch(),this.$v.formData.$anyError||this.$nextTick((function(){t.$emit("save")}))}}},K=W,G=Object(c["a"])(K,y,C,!1,null,null,null),Y=G.exports,J={name:"form-modal",components:{FormType:Y},props:{handleType:{type:String},userForm:{type:Object},options:{type:Object}},methods:{addUser:function(t){t.preventDefault(),this.$refs.form.onSubmit()},onSubmit:function(){var t=this;this.$nextTick((function(){t.$emit("save")}))}}},X=J,Z=Object(c["a"])(X,g,_,!1,null,null,null),tt=Z.exports,et=n("ed08"),nt=n("0905"),at=function(){return{currentPage:1,perPage:20,filters:{title:void 0}}},it=function(){return["id","title","isActive","startDate","endDate","publishDate","isSelect"]},rt=function(){return[{label:"ID",key:"id",sortable:!0,tdClass:"align-middle"},{label:"名称",key:"title",sortable:!0,tdClass:"align-middle"},{label:"当前评选",key:"isSelect",sortable:!0,tdClass:"align-middle"},{label:"状态",key:"isActive",sortable:!0,tdClass:"align-middle"},{label:"投票开始",key:"startDate",sortable:!0,tdClass:"align-middle"},{label:"投票结束",key:"endDate",sortable:!0,tdClass:"align-middle"},{label:"发布日期",key:"publishDate",sortable:!0,tdClass:"align-middle"},{key:"actions",label:" ",tdClass:"text-nowrap align-middle text-center"}]},st=function(){return[{label:"名称",value:"title",type:"input"}]},ot=n("83d6"),lt={name:"Event",components:{ListFilter:d,ListTable:b,FormModal:tt},computed:{totalItems:function(){return this.usersData.length},totalPages:function(){return Math.ceil(this.totalItems/this.listQuery.perPage)}},data:function(){return{searchKeys:it(),handleType:"create",usersData:[],userForm:E,listQuery:at(),filterOptions:st(),fields:rt(),originalUsersData:[],options:{}}},created:function(){this.getList()},methods:{getList:function(){var t=this;Object(nt["getEventList"])(this.listQuery).then((function(e){t.usersData=e.data.items,t.originalUsersData=e.data.items.slice(0)})).catch((function(t){console.log(t)}))},handleFilter:function(){this.getList()},showUserCreateModal:function(){this.userForm=E,this.handleType="create",this.$refs["addEvent"].$refs["form"].$v&&this.$refs["addEvent"].$refs["form"].$v.$reset(),this.$refs["addEvent"].$refs.userModal.show()},showUserEditModal:function(t){this.handleType="edit",this.userForm=t,this.$refs["addEvent"].$refs["form"].$v&&this.$refs["addEvent"].$refs["form"].$v.$reset(),this.$refs["addEvent"].$refs.userModal.show()},filter:function(t){var e=this,n=t.toLowerCase(),a=this.originalUsersData.filter((function(t){return-1!==Object.keys(t).filter((function(t){return e.searchKeys.includes(t)})).map((function(e){return String(t[e])})).join("|").toLowerCase().indexOf(n)||!n}));this.usersData=a},handleOperationUser:function(){"create"===this.handleType?this.handleCreateData():this.handleUpdateData()},handleCreateData:function(){var t=this;Object(nt["createEvent"])(this.userForm).then((function(e){t.usersData.unshift(e.data),t.$refs["addEvent"].$refs.userModal.hide(),Object(et["notify"])(ot.successAlert,"Success","创建成功")})).catch((function(t){console.log(t)}))},handleUpdateData:function(){var t=this,e=this.userForm.id;Object(nt["updateEvent"])(e,this.userForm).then((function(e){t.userForm=e.data,t.getList(),t.$refs["addEvent"].$refs.userModal.hide(),Object(et["notify"])(ot.successAlert,"Success","更新成功")})).catch((function(t){console.log(t)}))},handleDel:function(t){var e=this;Object(nt["closeEvent"])(t.id,t).then((function(t){Object(et["notify"])(ot.successAlert,"Success","关闭成功"),e.getList()})).catch((function(t){console.log(t)}))}}},ct=lt,ut=(n("8e35"),Object(c["a"])(ct,a,i,!1,null,null,null));e["default"]=ut.exports},f293:function(t,e,n){},f2a8:function(t,e,n){"use strict";var a={get _layoutHelpers(){return window.layoutHelpers},_exec:function(t){return this._layoutHelpers&&t()},getLayoutSidenav:function(){var t=this;return this._exec((function(){return t._layoutHelpers.getLayoutSidenav()}))||null},getSidenav:function(){var t=this;return this._exec((function(){return t._layoutHelpers.getSidenav()}))||null},getLayoutNavbar:function(){var t=this;return this._exec((function(){return t._layoutHelpers.getLayoutNavbar()}))||null},getLayoutFooter:function(){var t=this;return this._exec((function(){return t._layoutHelpers.getLayoutFooter()}))||null},getLayoutContainer:function(){var t=this;return this._exec((function(){return t._layoutHelpers.getLayoutContainer()}))||null},isSmallScreen:function(){var t=this;return this._exec((function(){return t._layoutHelpers.isSmallScreen()}))},isLayout1:function(){var t=this;return this._exec((function(){return t._layoutHelpers.isLayout1()}))},isCollapsed:function(){var t=this;return this._exec((function(){return t._layoutHelpers.isCollapsed()}))},isFixed:function(){var t=this;return this._exec((function(){return t._layoutHelpers.isFixed()}))},isOffcanvas:function(){var t=this;return this._exec((function(){return t._layoutHelpers.isOffcanvas()}))},isNavbarFixed:function(){var t=this;return this._exec((function(){return t._layoutHelpers.isNavbarFixed()}))},isFooterFixed:function(){var t=this;return this._exec((function(){return t._layoutHelpers.isFooterFixed()}))},isReversed:function(){var t=this;return this._exec((function(){return t._layoutHelpers.isReversed()}))},setCollapsed:function(t){var e=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this._exec((function(){return e._layoutHelpers.setCollapsed(t,n)}))},toggleCollapsed:function(){var t=this,e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this._exec((function(){return t._layoutHelpers.toggleCollapsed(e)}))},setPosition:function(t,e){var n=this;this._exec((function(){return n._layoutHelpers.setPosition(t,e)}))},setNavbarFixed:function(t){var e=this;this._exec((function(){return e._layoutHelpers.setNavbarFixed(t)}))},setFooterFixed:function(t){var e=this;this._exec((function(){return e._layoutHelpers.setFooterFixed(t)}))},setReversed:function(t){var e=this;this._exec((function(){return e._layoutHelpers.setReversed(t)}))},update:function(){var t=this;this._exec((function(){return t._layoutHelpers.update()}))},setAutoUpdate:function(t){var e=this;this._exec((function(){return e._layoutHelpers.setAutoUpdate(t)}))},on:function(t,e){var n=this;this._exec((function(){return n._layoutHelpers.on(t,e)}))},off:function(t){var e=this;this._exec((function(){return e._layoutHelpers.off(t)}))},init:function(){var t=this;this._exec((function(){return t._layoutHelpers.init()}))},destroy:function(){var t=this;this._exec((function(){return t._layoutHelpers.destroy()}))},_removeClass:function(t){var e=this;this._exec((function(){return e._layoutHelpers._removeClass(t)}))}};e["a"]=function(){return{baseUrl:"/",websiteTitle:"公益活动管理",layoutHelpers:a,get isRTL(){return"rtl"===document.documentElement.getAttribute("dir")||"rtl"===document.body.getAttribute("dir")},get isIEMode(){return"number"===typeof document["documentMode"]},get isIE10Mode(){return this.isIEMode&&10===document["documentMode"]},get layoutNavbarBg(){return"navbar-theme"},get layoutSidenavBg(){return"sidenav-theme"},get layoutFooterBg(){return"footer-theme"},scrollTop:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:document.scrollingElement||document.documentElement;if(n.scrollTop!==t){var a=n.scrollTop,i=t-a,r=+new Date,s=function(t,e,n,a){return t/=a/2,t<1?n/2*t*t+e:(t--,-n/2*(t*(t-2)-1)+e)},o=function o(){var l=+new Date,c=l-r;n.scrollTop=parseInt(s(c,a,i,e)),c<e?requestAnimationFrame(o):n.scrollTop=t};o()}}}}},f390:function(t,e,n){},f3cb:function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b-modal",{ref:"userModal",attrs:{"no-close-on-backdrop":!0,"no-close-on-esc":!0,size:"lg",centered:!0,"cancel-title":"取消","ok-title":"保存"},on:{ok:t.addUser}},[n("div",{attrs:{slot:"modal-title"},slot:"modal-title"},[t._v("打分（编号："+t._s(t.userForm.no)+"）")]),t._v(" "),n("div",{staticClass:"row"},[n("div",{staticClass:"col"},[n("h5",[t._v("作品名称："+t._s(t.userForm.title))]),t._v(" "),n("div",[t._v("作者："+t._s(t.userForm.author))]),t._v(" "),n("div",[t._v("学校（单位）："+t._s(t.userForm.organization))]),t._v(" "),n("div",[t._v(t._s(t.userForm.tabs))]),t._v(" "),n("div",{staticStyle:{padding:"10px",margin:"10px 0","background-color":"#f5f5f5"},domProps:{innerHTML:t._s(t.userForm.content)}})]),t._v(" "),n("div",{staticClass:"col-3"},[n("form-type",{ref:"form",attrs:{formData:t.userForm,handleType:t.handleType,options:t.options},on:{save:t.onSubmit}})],1)])])},i=[];n.d(e,"a",(function(){return a})),n.d(e,"b",(function(){return i}))},fe7f:function(t,e,n){"use strict";n.r(e);var a=n("c1e8"),i=n.n(a);for(var r in a)"default"!==r&&function(t){n.d(e,t,(function(){return a[t]}))}(r);e["default"]=i.a}});
//# sourceMappingURL=app.13631ab4.js.map